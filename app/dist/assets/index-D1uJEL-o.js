(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var br=(e=>(e[e.SECOND=1e3]="SECOND",e[e.MINUTE=6e4]="MINUTE",e[e.HALF_HOUR=18e5]="HALF_HOUR",e[e.HOUR=36e5]="HOUR",e[e.DAY=864e5]="DAY",e[e.WEEK=6048e5]="WEEK",e[e.MONTH=2592e6]="MONTH",e))(br||{});class nn{static set(t,n,r,a){const o=new Date;o.setTime(o.getTime()+r*a);const i=`expires=${o.toUTCString()}`;document.cookie=`${t}=${n};${i};path=/`}static get(t){const n=`${t}=`,r=document.cookie.split(";");for(let a=0;a<r.length;a++){let o=r[a];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(n)===0)return o.substring(n.length,o.length)}return null}static remove(t){document.cookie=`${t}=; Max-Age=-99999999;`}}function nt(e){return{ok:!0,value:e}}function re(e){return{ok:!1,error:e}}var Re=(e=>(e.rs3="rs3",e.osrs="osrs",e))(Re||{}),rn=(e=>(e.official="Official",e.runelite="RuneLite",e.hdos="HDOS",e))(rn||{});const da={rs3:["Official"],osrs:["Official","RuneLite","HDOS"]};class Nn{static parseTokenResponse(t){try{const n=JSON.parse(t),r=n.id_token.split(".");if(r.length!==3){const i=`Malformed id_token: ${r.length} sections, expected 3`;return re(i)}const a=JSON.parse(atob(r[0]));if(a.typ!=="JWT"){const i=`Bad id_token header: typ ${a.typ}, expected JWT`;return re(i)}const o=JSON.parse(atob(r[1]));return nt({access_token:n.access_token,id_token:n.id_token,refresh_token:n.refresh_token,sub:o.sub,expiry:Date.now()+n.expires_in*1e3})}catch{return re("Unable to parse token response")}}static parseSessionResponse(t){try{const n=JSON.parse(t);return n.sessionId?nt(n.sessionId):re("sessionId does not exist on parsed object")}catch{return re("Unable to parse session response")}}static decodeBolt(t){const n={};for(const r in t){const a=r,o=t[a];typeof o=="string"?n[a]=atob(o):Array.isArray(o)&&o.every(i=>typeof i=="string")?n[a]=o.map(i=>atob(i)):n[a]=o}return n}}var wr=(e=>(e.Windows="windows",e.Linux="linux",e.MacOS="mac",e))(wr||{});const $={env:Nn.decodeBolt(s()),platform:null,rs3debInstalledHash:null,rs3exeInstalledHash:null,rs3appInstalledHash:null,osrsexeInstalledHash:null,osrsappInstalledHash:null,runeLiteInstalledId:null,hdosInstalledVersion:null,isFlathub:!1,hasLibArchive:!1,hasBoltPlugins:!1,pluginConfig:{}};class lr{static async makeLoginUrl(t){const n=new TextEncoder().encode(t.pkceCodeVerifier),r=await crypto.subtle.digest("SHA-256",n);let a="";const o=new Uint8Array(r);for(let u=0;u<o.byteLength;u++)a+=String.fromCharCode(o[u]);const i=btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return t.origin.concat("/oauth2/auth?").concat(new URLSearchParams({auth_method:t.authMethod,login_type:t.loginType,flow:t.flow,response_type:"code",client_id:t.clientid,redirect_uri:t.redirect,code_challenge:i,code_challenge_method:"S256",prompt:"login",scope:"openid offline gamesso.token.create user.profile.read",state:t.pkceState}).toString())}static makeRandomVerifier(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=new Uint32Array(43);return crypto.getRandomValues(n),Array.from(n,function(r){return t[r%t.length]}).join("")}static makeRandomState(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=n.length-1,a=crypto.getRandomValues(new Uint8Array(12));return Array.from(a).map(o=>Math.round(o*(r-0)/255+0)).map(o=>n[o]).join("")}}class Ie{static pendingLoginWindow=null;static async openLoginWindow(t,n,r){if(Ie.pendingLoginWindow!==null)return Ie.pendingLoginWindow.window.focus();const a=lr.makeRandomState(),o=lr.makeRandomVerifier(),i=new TextEncoder().encode(o),u=await crypto.subtle.digest("SHA-256",i);let l="";const c=new Uint8Array(u);for(let p=0;p<c.byteLength;p++)l+=String.fromCharCode(c[p]);const f=btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),d=new URLSearchParams({auth_method:"",login_type:"",flow:"launcher",response_type:"code",client_id:r,redirect_uri:n,code_challenge:f,code_challenge_method:"S256",prompt:"login",scope:"openid offline gamesso.token.create user.profile.read",state:a}),h=`${t}/oauth2/auth?${d.toString()}`;nn.set("auth_verifier",o,10,br.MINUTE),Ie.pendingLoginWindow=window.open(h,"","width=480,height=720")}static navigateToAuthConsent(t,n,r){const a=lr.makeRandomState(),o=new URLSearchParams({id_token_hint:n,nonce:r,prompt:"consent",redirect_uri:"http://localhost",response_type:"id_token code",state:a,client_id:"1fddee4e-b100-4f4e-b2b0-097f9088f9d2",scope:"openid offline"}),i=`${t}/oauth2/auth?${o.toString()}`;nn.set("auth_nonce",r,10,br.MINUTE),window.location.href=i}static async refreshOAuthToken(t){return new Promise(n=>{if(t.expiry-Date.now()<3e4){const r=new URLSearchParams({grant_type:"refresh_token",client_id:$.env.clientid,refresh_token:t.refresh_token}),a=new XMLHttpRequest;a.onreadystatechange=()=>{if(a.readyState==4)if(a.status==200){const i=Nn.parseTokenResponse(a.response);i.ok?n(nt(i.value)):n(re(0))}else n(re(a.status))},a.onerror=()=>{n(re(0))};const o=$.env.origin.concat("/oauth2/token");a.open("POST",o,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.setRequestHeader("Accept","application/json"),a.send(r)}else n(nt(t))})}static async getOAuthToken(t,n,r,a,o){const i=`${t}/oauth2/token`;return new Promise(u=>{const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(l.readyState==4)if(l.status==200){const f=Nn.parseTokenResponse(l.response);return f.ok?u(nt(f.value)):u(re(f.error))}else return u(re(`Error: from ${i}: ${l.status}: ${l.response}`))},l.open("POST",i,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.setRequestHeader("Accept","application/json");const c=new URLSearchParams({grant_type:"authorization_code",client_id:n,code:o,code_verifier:r,redirect_uri:a});l.send(c)})}static revokeOauthCreds(t){const n=`${$.env.origin}/oauth2/revoke`;return new Promise(r=>{const a=new XMLHttpRequest;a.open("POST",n,!0),a.onreadystatechange=()=>{a.readyState==4&&r(a.status)},a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const o=new URLSearchParams({token:t,client_id:$.env.clientid});a.send(o)})}static async getSessionId(t,n){const r=`${t}/sessions`;return new Promise(a=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(o.readyState==4)if(o.status==200){const u=Nn.parseSessionResponse(o.response);return u.ok?a(nt(u.value)):a(re(u.error))}else re(`Error: from ${r}: ${o.status}: ${o.response}`)},o.open("POST",r,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","application/json");const i={idToken:n};o.send(JSON.stringify(i))})}static validateIdToken(t,n){const r=t.split(".");if(r.length!==3)return re(`Malformed id_token: ${r.length} sections, expected 3`);const a=JSON.parse(atob(r[0]));return a.typ!=="JWT"?re(`Bad id_token header: typ ${a.typ}, expected JWT`):JSON.parse(atob(r[1])).nonce!==n?re("Incorrect nonce in id_token"):nt(void 0)}}class Dn{static async buildSession(t,n){const r=await Dn.getUser(t.sub,t.access_token);if(!r.ok)return re(`Failed to fetch user. Status: ${r.error}`);const a=await Dn.getUserAccounts(n);return a.ok?nt({user:r.value,accounts:a.value,tokens:t,session_id:n}):re(`Failed to fetch game accounts. Status: ${a.error}`)}static getUser(t,n){return new Promise(r=>{const a=`${$.env.api}/users/${t}/displayName`,o=new XMLHttpRequest;o.onreadystatechange=()=>{if(o.readyState==4)if(o.status==200){const i=JSON.parse(o.response);r(nt(i))}else r(re(o.status))},o.open("GET",a,!0),o.setRequestHeader("Authorization","Bearer ".concat(n)),o.send()})}static getUserAccounts(t){const n=`${$.env.auth_api}/accounts`;return new Promise(r=>{const a=new XMLHttpRequest;a.onreadystatechange=async()=>{if(a.readyState==4)if(a.status==200){const o=JSON.parse(a.response);r(nt(o))}else r(re(a.status))},a.open("GET",n,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Authorization","Bearer ".concat(t)),a.send()})}}const ps=!1;var Jn=Array.isArray,_a=Array.prototype.indexOf,Rr=Array.from,jn=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor,hs=Object.getOwnPropertyDescriptors,va=Object.prototype,pa=Array.prototype,Cr=Object.getPrototypeOf,Xr=Object.isExtensible;const st=()=>{};function ha(e){return typeof e?.then=="function"}function ga(e){return e()}function Fn(e){for(var t=0;t<e.length;t++)e[t]()}function ma(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}function ba(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const je=2,Ir=4,Yn=8,dn=16,xt=32,zt=64,Tr=128,Ve=256,Bn=512,ge=1024,Je=2048,Ot=4096,at=8192,Vt=16384,Or=32768,$n=65536,Zr=1<<17,wa=1<<18,_n=1<<19,gs=1<<20,yr=1<<21,Ar=1<<22,Bt=1<<23,pt=Symbol("$state"),ya=Symbol("legacy props"),ka=Symbol(""),Ur=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ms(e){return e===this.v}function Nr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function bs(e){return!Nr(e,this.v)}function ws(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function xa(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Sa(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function $a(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ea(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Pa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function La(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ra(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ca(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ia(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ta(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}let vn=!1,Oa=!1;function Aa(){vn=!0}const Xn=1,Zn=2,ys=4,Ua=8,Na=16,Ha=1,Ma=2,Da=4,ja=8,Fa=16,Ba=1,qa=2,le=Symbol(),Wa="http://www.w3.org/1999/xhtml";let ee=null;function Tt(e){ee=e}function be(e,t=!1,n){ee={p:ee,c:null,e:null,s:e,x:null,l:vn&&!t?{s:null,u:null,$:[]}:null}}function we(e){var t=ee,n=t.e;if(n!==null){t.e=null;for(var r of n)qs(r)}return e!==void 0&&(t.x=e),ee=t.p,e??{}}function pn(){return!vn||ee!==null&&ee.l===null}let Lt=[],qn=[];function ks(){var e=Lt;Lt=[],Fn(e)}function Ga(){var e=qn;qn=[],Fn(e)}function za(){return Lt.length>0||qn.length>0}function hn(e){if(Lt.length===0&&!wn){var t=Lt;queueMicrotask(()=>{t===Lt&&ks()})}Lt.push(e)}function Va(){Lt.length>0&&ks(),qn.length>0&&Ga()}function Ja(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ya(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Xa=!1;function Mt(e){if(typeof e!="object"||e===null||pt in e)return e;const t=Cr(e);if(t!==va&&t!==pa)return e;var n=new Map,r=Jn(e),a=se(0),o=qt,i=u=>{if(qt===o)return u();var l=D,c=qt;me(null),ss(o);var f=u();return me(l),ss(c),f};return r&&n.set("length",se(e.length)),new Proxy(e,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Ra();var f=n.get(l);return f===void 0?f=i(()=>{var d=se(c.value);return n.set(l,d),d}):C(f,c.value,!0),!0},deleteProperty(u,l){var c=n.get(l);if(c===void 0){if(l in u){const f=i(()=>se(le));n.set(l,f),yn(a)}}else C(c,le),yn(a);return!0},get(u,l,c){if(l===pt)return e;var f=n.get(l),d=l in u;if(f===void 0&&(!d||Ft(u,l)?.writable)&&(f=i(()=>{var p=Mt(d?u[l]:le),_=se(p);return _}),n.set(l,f)),f!==void 0){var h=v(f);return h===le?void 0:h}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=v(f))}else if(c===void 0){var d=n.get(l),h=d?.v;if(d!==void 0&&h!==le)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(u,l){if(l===pt)return!0;var c=n.get(l),f=c!==void 0&&c.v!==le||Reflect.has(u,l);if(c!==void 0||j!==null&&(!f||Ft(u,l)?.writable)){c===void 0&&(c=i(()=>{var h=f?Mt(u[l]):le,p=se(h);return p}),n.set(l,c));var d=v(c);if(d===le)return!1}return f},set(u,l,c,f){var d=n.get(l),h=l in u;if(r&&l==="length")for(var p=c;p<d.v;p+=1){var _=n.get(p+"");_!==void 0?C(_,le):p in u&&(_=i(()=>se(le)),n.set(p+"",_))}if(d===void 0)(!h||Ft(u,l)?.writable)&&(d=i(()=>se(void 0)),C(d,Mt(c)),n.set(l,d));else{h=d.v!==le;var g=i(()=>Mt(c));C(d,g)}var m=Reflect.getOwnPropertyDescriptor(u,l);if(m?.set&&m.set.call(f,c),!h){if(r&&typeof l=="string"){var w=n.get("length"),b=Number(l);Number.isInteger(b)&&b>=w.v&&C(w,b+1)}yn(a)}return!0},ownKeys(u){v(a);var l=Reflect.ownKeys(u).filter(d=>{var h=n.get(d);return h===void 0||h.v!==le});for(var[c,f]of n)f.v!==le&&!(c in u)&&l.push(c);return l},setPrototypeOf(){Ca()}})}function Kr(e){try{if(e!==null&&typeof e=="object"&&pt in e)return e[pt]}catch{}return e}function Za(e,t){return Object.is(Kr(e),Kr(t))}var Qr,xs,Ss,$s;function Ka(){if(Qr===void 0){Qr=window,xs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ss=Ft(t,"firstChild").get,$s=Ft(t,"nextSibling").get,Xr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Xr(n)&&(n.__t=void 0)}}function gn(e=""){return document.createTextNode(e)}function Wn(e){return Ss.call(e)}function En(e){return $s.call(e)}function L(e,t){return Wn(e)}function G(e,t=!1){{var n=Wn(e);return n instanceof Comment&&n.data===""?En(n):n}}function y(e,t=1,n=!1){let r=e;for(;t--;)r=En(r);return r}function Qa(e){e.textContent=""}function Es(){return!1}const eo=new WeakMap;function Ps(e){var t=j;if(t===null)return D.f|=Bt,e;if((t.f&Or)===0){if((t.f&Tr)===0)throw!t.parent&&e instanceof Error&&Ls(e),e;t.b.error(e)}else un(e,t)}function un(e,t){for(;t!==null;){if((t.f&Tr)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&Ls(e),e}function Ls(e){const t=eo.get(e);t&&(jn(e,"message",{value:t.message}),jn(e,"stack",{value:t.stack}))}const ur=new Set;let K=null,Hn=null,kr=new Set,Gt=[],Kn=null,xr=!1,wn=!1;class ht{current=new Map;#a=new Map;#t=new Set;#d=0;#o=null;#c=!1;#s=[];#n=[];#e=[];#r=[];#i=[];#f=[];#u=[];skipped_effects=new Set;process(t){Gt=[],Hn=null;for(const a of t)this.#_(a);if(this.#s.length===0&&this.#d===0){this.#v();var n=this.#e,r=this.#r;this.#e=[],this.#r=[],this.#i=[],Hn=K,K=null,es(n),es(r),K===null?K=this:ur.delete(this),this.#o?.resolve()}else this.#l(this.#e),this.#l(this.#r),this.#l(this.#i);for(const a of this.#s)an(a);for(const a of this.#n)an(a);this.#s=[],this.#n=[]}#_(t){t.f^=ge;for(var n=t.first;n!==null;){var r=n.f,a=(r&(xt|zt))!==0,o=a&&(r&ge)!==0,i=o||(r&at)!==0||this.skipped_effects.has(n);if(!i&&n.fn!==null){if(a)n.f^=ge;else if((r&Ir)!==0)this.#r.push(n);else if((r&ge)===0)if((r&Ar)!==0){var u=n.b?.is_pending()?this.#n:this.#s;u.push(n)}else Qn(n)&&((n.f&dn)!==0&&this.#i.push(n),an(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#l(t){for(const n of t)((n.f&Je)!==0?this.#f:this.#u).push(n),Te(n,ge);t.length=0}capture(t,n){this.#a.has(t)||this.#a.set(t,n),this.current.set(t,t.v)}activate(){K=this}deactivate(){K=null,Hn=null;for(const t of kr)if(kr.delete(t),t(),K!==null)break}neuter(){this.#c=!0}flush(){Gt.length>0?Cs():this.#v(),K===this&&(this.#d===0&&ur.delete(this),this.deactivate())}#v(){if(!this.#c)for(const t of this.#t)t();this.#t.clear()}increment(){this.#d+=1}decrement(){if(this.#d-=1,this.#d===0){for(const t of this.#f)Te(t,Je),cn(t);for(const t of this.#u)Te(t,Ot),cn(t);this.#e=[],this.#r=[],this.flush()}else this.deactivate()}add_callback(t){this.#t.add(t)}settled(){return(this.#o??=ma()).promise}static ensure(){if(K===null){const t=K=new ht;ur.add(K),wn||ht.enqueue(()=>{K===t&&t.flush()})}return K}static enqueue(t){hn(t)}}function Rs(e){var t=wn;wn=!0;try{for(var n;;){if(Va(),Gt.length===0&&!za()&&(K?.flush(),Gt.length===0))return Kn=null,n;Cs()}}finally{wn=t}}function Cs(){var e=sn;xr=!0;try{var t=0;for(ns(!0);Gt.length>0;){var n=ht.ensure();if(t++>1e3){var r,a;to()}n.process(Gt),It.clear()}}finally{xr=!1,ns(e),Kn=null}}function to(){try{Pa()}catch(e){un(e,Kn)}}let Ht=null;function es(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Vt|at))===0&&Qn(r)&&(Ht=[],an(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?zs(r):r.fn=null),Ht?.length>0)){It.clear();for(const a of Ht)an(a);Ht=[]}}Ht=null}}function cn(e){for(var t=Kn=e;t.parent!==null;){t=t.parent;var n=t.f;if(xr&&t===j&&(n&dn)!==0)return;if((n&(zt|xt))!==0){if((n&ge)===0)return;t.f^=ge}}Gt.push(t)}function no(e){let t=0,n=yt(0),r;return()=>{wo()&&(v(n),Ln(()=>(t===0&&(r=I(()=>e(()=>yn(n)))),t+=1,()=>{hn(()=>{t-=1,t===0&&(r?.(),r=void 0,yn(n))})})))}}var ro=$n|_n|Tr;function so(e,t,n){new ao(e,t,n)}class ao{parent;#a=!1;#t;#d=null;#o;#c;#s;#n=null;#e=null;#r=null;#i=null;#f=0;#u=0;#_=!1;#l=null;#v=()=>{this.#l&&ct(this.#l,this.#f)};#m=no(()=>(this.#l=yt(this.#f),()=>{this.#l=null}));constructor(t,n,r){this.#t=t,this.#o=n,this.#c=r,this.parent=j.b,this.#a=!!this.#o.pending,this.#s=Rn(()=>{j.b=this;{try{this.#n=$e(()=>r(this.#t))}catch(a){this.error(a)}this.#u>0?this.#h():this.#a=!1}},ro)}#b(){try{this.#n=$e(()=>this.#c(this.#t))}catch(t){this.error(t)}this.#a=!1}#w(){const t=this.#o.pending;t&&(this.#e=$e(()=>t(this.#t)),ht.enqueue(()=>{this.#n=this.#p(()=>(ht.ensure(),$e(()=>this.#c(this.#t)))),this.#u>0?this.#h():(mt(this.#e,()=>{this.#e=null}),this.#a=!1)}))}is_pending(){return this.#a||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#o.pending}#p(t){var n=j,r=D,a=ee;Ye(this.#s),me(this.#s),Tt(this.#s.ctx);try{return t()}catch(o){return Ps(o),null}finally{Ye(n),me(r),Tt(a)}}#h(){const t=this.#o.pending;this.#n!==null&&(this.#i=document.createDocumentFragment(),oo(this.#n,this.#i)),this.#e===null&&(this.#e=$e(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#u+=t,this.#u===0&&(this.#a=!1,this.#e&&mt(this.#e,()=>{this.#e=null}),this.#i&&(this.#t.before(this.#i),this.#i=null))}update_pending_count(t){this.#g(t),this.#f+=t,kr.add(this.#v)}get_effect_pending(){return this.#m(),v(this.#l)}error(t){var n=this.#o.onerror;let r=this.#o.failed;if(this.#_||!n&&!r)throw t;this.#n&&(De(this.#n),this.#n=null),this.#e&&(De(this.#e),this.#e=null),this.#r&&(De(this.#r),this.#r=null);var a=!1,o=!1;const i=()=>{if(a){Ya();return}a=!0,o&&Ta(),ht.ensure(),this.#f=0,this.#r!==null&&mt(this.#r,()=>{this.#r=null}),this.#a=this.has_pending_snippet(),this.#n=this.#p(()=>(this.#_=!1,$e(()=>this.#c(this.#t)))),this.#u>0?this.#h():this.#a=!1};var u=D;try{me(null),o=!0,n?.(t,i),o=!1}catch(l){un(l,this.#s&&this.#s.parent)}finally{me(u)}r&&hn(()=>{this.#r=this.#p(()=>{this.#_=!0;try{return $e(()=>{r(this.#t,()=>t,()=>i)})}catch(l){return un(l,this.#s.parent),null}finally{this.#_=!1}})})}}function oo(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var a=n===r?null:En(n);t.append(n),n=a}}function io(e,t,n){const r=pn()?Pn:Hr;if(t.length===0){n(e.map(r));return}var a=K,o=j,i=lo();Promise.all(t.map(u=>uo(u))).then(u=>{a?.activate(),i();try{n([...e.map(r),...u])}catch(l){(o.f&Vt)===0&&un(l,o)}a?.deactivate(),Is()}).catch(u=>{un(u,o)})}function lo(){var e=j,t=D,n=ee,r=K;return function(){Ye(e),me(t),Tt(n),r?.activate()}}function Is(){Ye(null),me(null),Tt(null)}function Pn(e){var t=je|Je,n=D!==null&&(D.f&je)!==0?D:null;return j===null||n!==null&&(n.f&Ve)!==0?t|=Ve:j.f|=_n,{ctx:ee,deps:null,effects:null,equals:ms,f:t,fn:e,reactions:null,rv:0,v:le,wv:0,parent:n??j,ac:null}}function uo(e,t){let n=j;n===null&&xa();var r=n.b,a=void 0,o=yt(le),i=null,u=!D;return xo(()=>{try{var l=e();i&&Promise.resolve(l).catch(()=>{})}catch(p){l=Promise.reject(p)}var c=()=>l;a=i?.then(c,c)??Promise.resolve(l),i=a;var f=K,d=r.is_pending();u&&(r.update_pending_count(1),d||f.increment());const h=(p,_=void 0)=>{i=null,d||f.activate(),_?_!==Ur&&(o.f|=Bt,ct(o,_)):((o.f&Bt)!==0&&(o.f^=Bt),ct(o,p)),u&&(r.update_pending_count(-1),d||f.decrement()),Is()};if(a.then(h,p=>h(null,p||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(l=>{function c(f){function d(){f===a?l(o):c(a)}f.then(d,d)}c(a)})}function Me(e){const t=Pn(e);return Us(t),t}function Hr(e){const t=Pn(e);return t.equals=bs,t}function Ts(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)De(t[n])}}function co(e){for(var t=e.parent;t!==null;){if((t.f&je)===0)return t;t=t.parent}return null}function Mr(e){var t,n=j;Ye(co(e));try{Ts(e),t=Ds(e)}finally{Ye(n)}return t}function Os(e){var t=Mr(e);if(e.equals(t)||(e.v=t,e.wv=Hs()),!Jt){var n=(Rt||(e.f&Ve)!==0)&&e.deps!==null?Ot:ge;Te(e,n)}}const It=new Map;function yt(e,t){var n={f:0,v:e,reactions:null,equals:ms,rv:0,wv:0};return n}function se(e,t){const n=yt(e);return Us(n),n}function ze(e,t=!1,n=!0){const r=yt(e);return t||(r.equals=bs),vn&&n&&ee!==null&&ee.l!==null&&(ee.l.s??=[]).push(r),r}function C(e,t,n=!1){D!==null&&(!rt||(D.f&Zr)!==0)&&pn()&&(D.f&(je|dn|Ar|Zr))!==0&&!gt?.includes(e)&&Ia();let r=n?Mt(t):t;return ct(e,r)}function ct(e,t){if(!e.equals(t)){var n=e.v;Jt?It.set(e,t):It.set(e,n),e.v=t;var r=ht.ensure();r.capture(e,n),(e.f&je)!==0&&((e.f&Je)!==0&&Mr(e),Te(e,(e.f&Ve)===0?ge:Ot)),e.wv=Hs(),As(e,Je),pn()&&j!==null&&(j.f&ge)!==0&&(j.f&(xt|zt))===0&&(Ge===null?po([e]):Ge.push(e))}return t}function yn(e){C(e,e.v+1)}function As(e,t){var n=e.reactions;if(n!==null)for(var r=pn(),a=n.length,o=0;o<a;o++){var i=n[o],u=i.f;if(!(!r&&i===j)){var l=(u&Je)===0;l&&Te(i,t),(u&je)!==0?As(i,Ot):l&&((u&dn)!==0&&Ht!==null&&Ht.push(i),cn(i))}}}let tn=null;function fo(e){var t=tn;try{if(tn=new Set,I(e),t!==null)for(var n of tn)t.add(n);return tn}finally{tn=t}}function _o(e){for(var t of fo(e))ct(t,t.v)}let ts=!1;function vo(){ts||(ts=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Dr(e){var t=D,n=j;me(null),Ye(null);try{return e()}finally{me(t),Ye(n)}}function jr(e,t,n,r=n){e.addEventListener(t,()=>Dr(n));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),vo()}let sn=!1;function ns(e){sn=e}let Jt=!1;function rs(e){Jt=e}let D=null,rt=!1;function me(e){D=e}let j=null;function Ye(e){j=e}let gt=null;function Us(e){D!==null&&(gt===null?gt=[e]:gt.push(e))}let Se=null,Ne=0,Ge=null;function po(e){Ge=e}let Ns=1,Sn=0,qt=Sn;function ss(e){qt=e}let Rt=!1;function Hs(){return++Ns}function Qn(e){var t=e.f;if((t&Je)!==0)return!0;if((t&Ot)!==0){var n=e.deps,r=(t&Ve)!==0;if(n!==null){var a,o,i=(t&Bn)!==0,u=r&&j!==null&&!Rt,l=n.length;if((i||u)&&(j===null||(j.f&Vt)===0)){var c=e,f=c.parent;for(a=0;a<l;a++)o=n[a],(i||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);i&&(c.f^=Bn),u&&f!==null&&(f.f&Ve)===0&&(c.f^=Ve)}for(a=0;a<l;a++)if(o=n[a],Qn(o)&&Os(o),o.wv>e.wv)return!0}(!r||j!==null&&!Rt)&&Te(e,ge)}return!1}function Ms(e,t,n=!0){var r=e.reactions;if(r!==null&&!gt?.includes(e))for(var a=0;a<r.length;a++){var o=r[a];(o.f&je)!==0?Ms(o,t,!1):t===o&&(n?Te(o,Je):(o.f&ge)!==0&&Te(o,Ot),cn(o))}}function Ds(e){var t=Se,n=Ne,r=Ge,a=D,o=Rt,i=gt,u=ee,l=rt,c=qt,f=e.f;Se=null,Ne=0,Ge=null,Rt=(f&Ve)!==0&&(rt||!sn||D===null),D=(f&(xt|zt))===0?e:null,gt=null,Tt(e.ctx),rt=!1,qt=++Sn,e.ac!==null&&(Dr(()=>{e.ac.abort(Ur)}),e.ac=null);try{e.f|=yr;var d=e.fn,h=d(),p=e.deps;if(Se!==null){var _;if(Gn(e,Ne),p!==null&&Ne>0)for(p.length=Ne+Se.length,_=0;_<Se.length;_++)p[Ne+_]=Se[_];else e.deps=p=Se;if(!Rt||(f&je)!==0&&e.reactions!==null)for(_=Ne;_<p.length;_++)(p[_].reactions??=[]).push(e)}else p!==null&&Ne<p.length&&(Gn(e,Ne),p.length=Ne);if(pn()&&Ge!==null&&!rt&&p!==null&&(e.f&(je|Ot|Je))===0)for(_=0;_<Ge.length;_++)Ms(Ge[_],e);return a!==null&&a!==e&&(Sn++,Ge!==null&&(r===null?r=Ge:r.push(...Ge))),(e.f&Bt)!==0&&(e.f^=Bt),h}catch(g){return Ps(g)}finally{e.f^=yr,Se=t,Ne=n,Ge=r,D=a,Rt=o,gt=i,Tt(u),rt=l,qt=c}}function ho(e,t){let n=t.reactions;if(n!==null){var r=_a.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&je)!==0&&(Se===null||!Se.includes(t))&&(Te(t,Ot),(t.f&(Ve|Bn))===0&&(t.f^=Bn),Ts(t),Gn(t,0))}function Gn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ho(e,n[r])}function an(e){var t=e.f;if((t&Vt)===0){Te(e,ge);var n=j,r=sn;j=e,sn=!0;try{(t&dn)!==0?So(e):Gs(e),Ws(e);var a=Ds(e);e.teardown=typeof a=="function"?a:null,e.wv=Ns;var o;ps&&Oa&&(e.f&Je)!==0&&e.deps}finally{sn=r,j=n}}}async function go(){await Promise.resolve(),Rs()}function v(e){var t=e.f,n=(t&je)!==0;if(tn?.add(e),D!==null&&!rt){var r=j!==null&&(j.f&Vt)!==0;if(!r&&!gt?.includes(e)){var a=D.deps;if((D.f&yr)!==0)e.rv<Sn&&(e.rv=Sn,Se===null&&a!==null&&a[Ne]===e?Ne++:Se===null?Se=[e]:(!Rt||!Se.includes(e))&&Se.push(e));else{(D.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[D]:o.includes(D)||o.push(D)}}}else if(n&&e.deps===null&&e.effects===null){var i=e,u=i.parent;u!==null&&(u.f&Ve)===0&&(i.f^=Ve)}if(Jt){if(It.has(e))return It.get(e);if(n){i=e;var l=i.v;return((i.f&ge)===0&&i.reactions!==null||js(i))&&(l=Mr(i)),It.set(i,l),l}}else n&&(i=e,Qn(i)&&Os(i));if((e.f&Bt)!==0)throw e.v;return e.v}function js(e){if(e.v===le)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(It.has(t)||(t.f&je)!==0&&js(t))return!0;return!1}function Q(e){return e&&v(e)}function I(e){var t=rt;try{return rt=!0,e()}finally{rt=t}}const mo=-7169;function Te(e,t){e.f=e.f&mo|t}function Fs(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(pt in e)Sr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&pt in n&&Sr(n)}}}function Sr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Sr(e[r],t)}catch{}const n=Cr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=hs(n);for(let a in r){const o=r[a].get;if(o)try{o.call(e)}catch{}}}}}function Bs(e){j===null&&D===null&&Ea(),D!==null&&(D.f&Ve)!==0&&j===null&&$a(),Jt&&Sa()}function bo(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ft(e,t,n,r=!0){var a=j;a!==null&&(a.f&at)!==0&&(e|=at);var o={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:e|Je,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{an(o),o.f|=Or}catch(l){throw De(o),l}else t!==null&&cn(o);if(r){var i=o;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&_n)===0&&(i=i.first),i!==null&&(i.parent=a,a!==null&&bo(i,a),D!==null&&(D.f&je)!==0&&(e&zt)===0)){var u=D;(u.effects??=[]).push(i)}}return o}function wo(){return D!==null&&!rt}function Fr(e){const t=ft(Yn,null,!1);return Te(t,ge),t.teardown=e,t}function fn(e){Bs();var t=j.f,n=!D&&(t&xt)!==0&&(t&Or)===0;if(n){var r=ee;(r.e??=[]).push(e)}else return qs(e)}function qs(e){return ft(Ir|gs,e,!1)}function yo(e){return Bs(),ft(Yn|gs,e,!0)}function ko(e){ht.ensure();const t=ft(zt|_n,e,!0);return(n={})=>new Promise(r=>{n.outro?mt(t,()=>{De(t),r(void 0)}):(De(t),r(void 0))})}function Br(e){return ft(Ir,e,!1)}function xo(e){return ft(Ar|_n,e,!0)}function Ln(e,t=0){return ft(Yn|t,e,!0)}function z(e,t=[],n=[]){io(t,n,r=>{ft(Yn,()=>e(...r.map(v)),!0)})}function Rn(e,t=0){var n=ft(dn|t,e,!0);return n}function $e(e,t=!0){return ft(xt|_n,e,!0,t)}function Ws(e){var t=e.teardown;if(t!==null){const n=Jt,r=D;rs(!0),me(null);try{t.call(null)}finally{rs(n),me(r)}}}function Gs(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Dr(()=>{a.abort(Ur)});var r=n.next;(n.f&zt)!==0?n.parent=null:De(n,t),n=r}}function So(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&xt)===0&&De(t),t=n}}function De(e,t=!0){var n=!1;(t||(e.f&wa)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&($o(e.nodes_start,e.nodes_end),n=!0),Gs(e,t&&!n),Gn(e,0),Te(e,Vt);var r=e.transitions;if(r!==null)for(const o of r)o.stop();Ws(e);var a=e.parent;a!==null&&a.first!==null&&zs(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function $o(e,t){for(;e!==null;){var n=e===t?null:En(e);e.remove(),e=n}}function zs(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function mt(e,t){var n=[];qr(e,n,!0),Vs(n,()=>{De(e),t&&t()})}function Vs(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function qr(e,t,n){if((e.f&at)===0){if(e.f^=at,e.transitions!==null)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var r=e.first;r!==null;){var a=r.next,o=(r.f&$n)!==0||(r.f&xt)!==0;qr(r,t,o?n:!1),r=a}}}function on(e){Js(e,!0)}function Js(e,t){if((e.f&at)!==0){e.f^=at,(e.f&ge)===0&&(Te(e,Je),cn(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&$n)!==0||(n.f&xt)!==0;Js(n,a?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}const Eo=["touchstart","touchmove"];function Po(e){return Eo.includes(e)}const Ys=new Set,$r=new Set;function ot(e){for(var t=0;t<e.length;t++)Ys.add(e[t]);for(var n of $r)n(e)}let as=null;function On(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],o=a[0]||e.target;as=e;var i=0,u=as===e&&e.__root;if(u){var l=a.indexOf(u);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=a.indexOf(t);if(c===-1)return;l<=c&&(i=l)}if(o=a[i]||e.target,o!==t){jn(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=D,d=j;me(null),Ye(null);try{for(var h,p=[];o!==null;){var _=o.assignedSlot||o.parentNode||o.host||null;try{var g=o["__"+r];if(g!=null&&(!o.disabled||e.target===o))if(Jn(g)){var[m,...w]=g;m.apply(o,[e,...w])}else g.call(o,e)}catch(b){h?p.push(b):h=b}if(e.cancelBubble||_===t||_===null)break;o=_}if(h){for(let b of p)queueMicrotask(()=>{throw b});throw h}}finally{e.__root=t,delete e.currentTarget,me(f),Ye(d)}}}function Lo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function zn(e,t){var n=j;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function P(e,t){var n=(t&Ba)!==0,r=(t&qa)!==0,a,o=!e.startsWith("<!>");return()=>{a===void 0&&(a=Lo(o?e:"<!>"+e),n||(a=Wn(a)));var i=r||xs?document.importNode(a,!0):a.cloneNode(!0);if(n){var u=Wn(i),l=i.lastChild;zn(u,l)}else zn(i,i);return i}}function os(e=""){{var t=gn(e+"");return zn(t,t),t}}function ut(){var e=document.createDocumentFragment(),t=document.createComment(""),n=gn();return e.append(t,n),zn(t,n),e}function x(e,t){e!==null&&e.before(t)}function he(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function is(e,t){return Ro(e,t)}const Qt=new Map;function Ro(e,{target:t,anchor:n,props:r={},events:a,context:o,intro:i=!0}){Ka();var u=new Set,l=d=>{for(var h=0;h<d.length;h++){var p=d[h];if(!u.has(p)){u.add(p);var _=Po(p);t.addEventListener(p,On,{passive:_});var g=Qt.get(p);g===void 0?(document.addEventListener(p,On,{passive:_}),Qt.set(p,1)):Qt.set(p,g+1)}}};l(Rr(Ys)),$r.add(l);var c=void 0,f=ko(()=>{var d=n??t.appendChild(gn());return so(d,{pending:()=>{}},h=>{if(o){be({});var p=ee;p.c=o}a&&(r.$$events=a),c=e(h,r)||{},o&&we()}),()=>{for(var h of u){t.removeEventListener(h,On);var p=Qt.get(h);--p===0?(document.removeEventListener(h,On),Qt.delete(h)):Qt.set(h,p)}$r.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return Co.set(c,f),c}let Co=new WeakMap;const cr=0,An=1,fr=2;function ls(e,t,n,r,a){var o=e,i=pn(),u=ee,l=le,c,f,d,h=i?yt(void 0):ze(void 0,!1,!1),p=i?yt(void 0):ze(void 0,!1,!1),_=!1;function g(w,b){_=!0,b&&(Ye(m),me(m),Tt(u));try{w===cr&&n&&(c?on(c):c=$e(()=>n(o))),w===An&&r&&(f?on(f):f=$e(()=>r(o,h))),w===fr&&a&&(d?on(d):d=$e(()=>a(o,p))),w!==cr&&c&&mt(c,()=>c=null),w!==An&&f&&mt(f,()=>f=null),w!==fr&&d&&mt(d,()=>d=null)}finally{b&&(Tt(null),me(null),Ye(null),Rs())}}var m=Rn(()=>{if(l!==(l=t())){if(ha(l)){var w=l;_=!1,w.then(b=>{w===l&&(ct(h,b),g(An,!0))},b=>{if(w===l&&(ct(p,b),g(fr,!0),!a))throw p.v}),hn(()=>{_||g(cr,!0)})}else ct(h,l),g(An,!1);return()=>l=le}})}function Z(e,t,n=!1){var r=e,a=null,o=null,i=le,u=n?$n:0,l=!1;const c=(p,_=!0)=>{l=!0,h(_,p)};var f=null;function d(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var p=i?a:o,_=i?o:a;p&&on(p),_&&mt(_,()=>{i?o=null:a=null})}const h=(p,_)=>{if(i!==(i=p)){var g=Es(),m=r;if(g&&(f=document.createDocumentFragment(),f.append(m=gn())),i?a??=_&&$e(()=>_(m)):o??=_&&$e(()=>_(m)),g){var w=K,b=i?a:o,E=i?o:a;b&&w.skipped_effects.delete(b),E&&w.skipped_effects.add(E),w.add_callback(d)}else d()}};Rn(()=>{l=!1,t(c),l||h(null,null)},u)}function Dt(e,t){return t}function Io(e,t,n){for(var r=e.items,a=[],o=t.length,i=0;i<o;i++)qr(t[i].e,a,!0);var u=o>0&&a.length===0&&n!==null;if(u){var l=n.parentNode;Qa(l),l.append(n),r.clear(),lt(e,t[0].prev,t[o-1].next)}Vs(a,()=>{for(var c=0;c<o;c++){var f=t[c];u||(r.delete(f.k),lt(e,f.prev,f.next)),De(f.e,!u)}})}function Ct(e,t,n,r,a,o=null){var i=e,u={flags:t,items:new Map,first:null},l=(t&ys)!==0;if(l){var c=e;i=c.appendChild(gn())}var f=null,d=!1,h=new Map,p=Hr(()=>{var w=n();return Jn(w)?w:w==null?[]:Rr(w)}),_,g;function m(){To(g,_,u,h,i,a,t,r,n),o!==null&&(_.length===0?f?on(f):f=$e(()=>o(i)):f!==null&&mt(f,()=>{f=null}))}Rn(()=>{g??=j,_=v(p);var w=_.length;if(!(d&&w===0)){d=w===0;var b,E,H,U;if(Es()){var S=new Set,R=K;for(E=0;E<w;E+=1){H=_[E],U=r(H,E);var M=u.items.get(U)??h.get(U);M?(t&(Xn|Zn))!==0&&Xs(M,H,E,t):(b=Zs(null,u,null,null,H,U,E,a,t,n,!0),h.set(U,b)),S.add(U)}for(const[T,J]of u.items)S.has(T)||R.skipped_effects.add(J.e);R.add_callback(m)}else m();v(p)}})}function To(e,t,n,r,a,o,i,u,l){var c=(i&Ua)!==0,f=(i&(Xn|Zn))!==0,d=t.length,h=n.items,p=n.first,_=p,g,m=null,w,b=[],E=[],H,U,S,R;if(c)for(R=0;R<d;R+=1)H=t[R],U=u(H,R),S=h.get(U),S!==void 0&&(S.a?.measure(),(w??=new Set).add(S));for(R=0;R<d;R+=1){if(H=t[R],U=u(H,R),S=h.get(U),S===void 0){var M=r.get(U);if(M!==void 0){r.delete(U),h.set(U,M);var T=m?m.next:_;lt(n,m,M),lt(n,M,T),dr(M,T,a),m=M}else{var J=_?_.e.nodes_start:a;m=Zs(J,n,m,m===null?n.first:m.next,H,U,R,o,i,l)}h.set(U,m),b=[],E=[],_=m.next;continue}if(f&&Xs(S,H,R,i),(S.e.f&at)!==0&&(on(S.e),c&&(S.a?.unfix(),(w??=new Set).delete(S))),S!==_){if(g!==void 0&&g.has(S)){if(b.length<E.length){var ue=E[0],X;m=ue.prev;var ve=b[0],B=b[b.length-1];for(X=0;X<b.length;X+=1)dr(b[X],ue,a);for(X=0;X<E.length;X+=1)g.delete(E[X]);lt(n,ve.prev,B.next),lt(n,m,ve),lt(n,B,ue),_=ue,m=B,R-=1,b=[],E=[]}else g.delete(S),dr(S,_,a),lt(n,S.prev,S.next),lt(n,S,m===null?n.first:m.next),lt(n,m,S),m=S;continue}for(b=[],E=[];_!==null&&_.k!==U;)(_.e.f&at)===0&&(g??=new Set).add(_),E.push(_),_=_.next;if(_===null)continue;S=_}b.push(S),m=S,_=S.next}if(_!==null||g!==void 0){for(var fe=g===void 0?[]:Rr(g);_!==null;)(_.e.f&at)===0&&fe.push(_),_=_.next;var Fe=fe.length;if(Fe>0){var q=(i&ys)!==0&&d===0?a:null;if(c){for(R=0;R<Fe;R+=1)fe[R].a?.measure();for(R=0;R<Fe;R+=1)fe[R].a?.fix()}Io(n,fe,q)}}c&&hn(()=>{if(w!==void 0)for(S of w)S.a?.apply()}),e.first=n.first&&n.first.e,e.last=m&&m.e;for(var Y of r.values())De(Y.e);r.clear()}function Xs(e,t,n,r){(r&Xn)!==0&&ct(e.v,t),(r&Zn)!==0?ct(e.i,n):e.i=n}function Zs(e,t,n,r,a,o,i,u,l,c,f){var d=(l&Xn)!==0,h=(l&Na)===0,p=d?h?ze(a,!1,!1):yt(a):a,_=(l&Zn)===0?i:yt(i),g={i:_,v:p,k:o,a:null,e:null,prev:n,next:r};try{if(e===null){var m=document.createDocumentFragment();m.append(e=gn())}return g.e=$e(()=>u(e,p,_,c),Xa),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?f||(t.first=g):(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function dr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var i=En(o);a.before(o),o=i}}function lt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Vn(e,t,...n){var r=e,a=st,o;Rn(()=>{a!==(a=t())&&(o&&(De(o),o=null),o=$e(()=>a(r,...n)))},$n)}function Oo(e,t,n){Br(()=>{var r=I(()=>t(e,n?.())||{});if(n&&r?.update){var a=!1,o={};Ln(()=>{var i=n();Fs(i),a&&Nr(o,i)&&(o=i,r.update(i))}),a=!0}if(r?.destroy)return()=>r.destroy()})}function Ks(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Ks(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ao(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Ks(e))&&(r&&(r+=" "),r+=t);return r}function Mn(e){return typeof e=="object"?Ao(e):e??""}const us=[...` 	
\r\fÂ \v\uFEFF`];function Uo(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var o=a.length,i=0;(i=r.indexOf(a,i))>=0;){var u=i+o;(i===0||us.includes(r[i-1]))&&(u===r.length||us.includes(r[u]))?r=(i===0?"":r.substring(0,i))+r.substring(u+1):i=u}}return r===""?null:r}function Oe(e,t,n,r,a,o){var i=e.__className;if(i!==n||i===void 0){var u=Uo(n,r,o);u==null?e.removeAttribute("class"):e.className=u,e.__className=n}else if(o&&a!==o)for(var l in o){var c=!!o[l];(a==null||c!==!!a[l])&&e.classList.toggle(l,c)}return o}function Wr(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Jn(t))return Ja();for(var r of e.options)r.selected=t.includes(kn(r));return}for(r of e.options){var a=kn(r);if(Za(a,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Qs(e){var t=new MutationObserver(()=>{Wr(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Fr(()=>{t.disconnect()})}function Gr(e,t,n=t){var r=!0;jr(e,"change",a=>{var o=a?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(o),kn);else{var u=e.querySelector(o)??e.querySelector("option:not([disabled])");i=u&&kn(u)}n(i)}),Br(()=>{var a=t();if(Wr(e,a,r),r&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=kn(o),n(a))}e.__value=a,r=!1}),Qs(e)}function kn(e){return"__value"in e?e.__value:e.value}const No=Symbol("is custom element"),Ho=Symbol("is html");function bt(e,t,n,r){var a=Mo(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[ka]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Do(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Mo(e){return e.__attributes??={[No]:e.nodeName.includes("-"),[Ho]:e.namespaceURI===Wa}}var cs=new Map;function Do(e){var t=e.getAttribute("is")||e.nodeName,n=cs.get(t);if(n)return n;cs.set(t,n=[]);for(var r,a=e,o=Element.prototype;o!==a;){r=hs(a);for(var i in r)r[i].set&&n.push(i);a=Cr(a)}return n}function jt(e,t,n=t){var r=new WeakSet;jr(e,"input",async a=>{var o=a?e.defaultValue:e.value;if(o=_r(e)?vr(o):o,n(o),K!==null&&r.add(K),await go(),o!==(o=t())){var i=e.selectionStart,u=e.selectionEnd;e.value=o??"",u!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(u,e.value.length))}}),I(t)==null&&e.value&&(n(_r(e)?vr(e.value):e.value),K!==null&&r.add(K)),Ln(()=>{var a=t();if(e===document.activeElement){var o=Hn??K;if(r.has(o))return}_r(e)&&a===vr(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function ln(e,t,n=t){jr(e,"change",r=>{var a=r?e.defaultChecked:e.checked;n(a)}),I(t)==null&&n(e.checked),Ln(()=>{var r=t();e.checked=!!r})}function _r(e){var t=e.type;return t==="number"||t==="range"}function vr(e){return e===""?null:+e}function ea(e,t,n){var r=Ft(e,t);r&&r.set&&(e[t]=n,Fr(()=>{e[t]=null}))}function fs(e,t){return e===t||e?.[pt]===t}function kt(e={},t,n,r){return Br(()=>{var a,o;return Ln(()=>{a=o,o=[],I(()=>{e!==n(...o)&&(t(e,...o),a&&fs(n(...a),e)&&t(null,...a))})}),()=>{hn(()=>{o&&fs(n(...o),e)&&t(null,...o)})}}),e}function Yt(e=!1){const t=ee,n=t.l.u;if(!n)return;let r=()=>Fs(t.s);if(e){let a=0,o={};const i=Pn(()=>{let u=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],u=!0);return u&&a++,a});r=()=>v(i)}n.b.length&&yo(()=>{ds(t,r),Fn(n.b)}),fn(()=>{const a=I(()=>n.m.map(ga));return()=>{for(const o of a)typeof o=="function"&&o()}}),n.a.length&&fn(()=>{ds(t,r),Fn(n.a)})}function ds(e,t){if(e.l.s)for(const n of e.l.s)v(n);t()}let Un=!1,Er=Symbol();function Ee(e,t,n){const r=n[t]??={store:null,source:ze(void 0),unsubscribe:st};if(r.store!==e&&!(Er in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=st;else{var a=!0;r.unsubscribe=ta(e,o=>{a?r.source.v=o:C(r.source,o)}),a=!1}return e&&Er in n?Ce(e):v(r.source)}function Xe(){const e={};function t(){Fr(()=>{for(var n in e)e[n].unsubscribe();jn(e,Er,{enumerable:!1,value:!0})})}return[e,t]}function ae(e,t,n){return e.set(n),t}function jo(e){var t=Un;try{return Un=!1,[e(),Un]}finally{Un=t}}function Wt(e,t,n,r){var a=!vn||(n&Ma)!==0,o=(n&ja)!==0,i=(n&Fa)!==0,u=r,l=!0,c=()=>(l&&(l=!1,u=i?I(r):r),u),f;if(o){var d=pt in e||ya in e;f=Ft(e,t)?.set??(d&&t in e?E=>e[t]=E:void 0)}var h,p=!1;o?[h,p]=jo(()=>e[t]):h=e[t],h===void 0&&r!==void 0&&(h=c(),f&&(a&&La(),f(h)));var _;if(a?_=()=>{var E=e[t];return E===void 0?c():(l=!0,E)}:_=()=>{var E=e[t];return E!==void 0&&(u=void 0),E===void 0?u:E},a&&(n&Da)===0)return _;if(f){var g=e.$$legacy;return(function(E,H){return arguments.length>0?((!a||!H||g||p)&&f(H?_():E),E):_()})}var m=!1,w=((n&Ha)!==0?Pn:Hr)(()=>(m=!1,_()));o&&v(w);var b=j;return(function(E,H){if(arguments.length>0){const U=H?v(w):a&&o?Mt(E):E;return C(w,U),m=!0,u!==void 0&&(u=U),E}return Jt&&m||(b.f&Vt)!==0?w.v:v(w)})}function zr(e){ee===null&&ws(),vn&&ee.l!==null?Bo(ee).m.push(e):fn(()=>{const t=I(e);if(typeof t=="function")return t})}function Fo(e){ee===null&&ws(),zr(()=>()=>I(e))}function Bo(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}function ta(e,t,n){if(e==null)return t(void 0),st;const r=I(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const en=[];function xn(e,t=st){let n=null;const r=new Set;function a(u){if(Nr(e,u)&&(e=u,n)){const l=!en.length;for(const c of r)c[1](),en.push(c,e);if(l){for(let c=0;c<en.length;c+=2)en[c][0](en[c+1]);en.length=0}}}function o(u){a(u(e))}function i(u,l=st){const c=[u,l];return r.add(c),r.size===1&&(n=t(a,o)||st),u(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:a,update:o,subscribe:i}}function Ce(e){let t;return ta(e,n=>t=n)(),t}var Pr=(e=>(e.info="info",e.warn="warn",e.error="error",e))(Pr||{});class qo{logs=xn([]);_addLog(t,n){this.logs.update(r=>(r.unshift({date:new Date,severity:t,content:n}),r))}info(t){this._addLog("info",t)}warn(t){this._addLog("warn",t)}error(t){this._addLog("error",t)}updateLogAtIndex(t,n){this.logs.update(r=>(r[t]&&(r[t].content=n),r))}}const A=new qo;function Wo(e,t){let n=!1;return e.subscribe(r=>{n?t(r):n=!0})}const Go={use_dark_theme:!0,rs_plugin_loader:!1,close_after_launch:!1,check_announcements:!0,flatpak_rich_presence:!1,runelite_use_custom_jar:!1,use_custom_rs_config_uri:!1,discard_expired_sessions:!0,rs_launch_command:null,osrs_launch_command:null,runelite_custom_jar:null,runelite_launch_command:null,hdos_launch_command:null,selected:{game:Re.osrs,client:rn.runelite,user_id:null},userDetails:{}};function zo(){const t=new URLSearchParams(window.location.search).get("config");function n(a){return typeof a=="object"&&typeof a.use_dark_theme=="boolean"&&typeof a.rs_plugin_loader=="boolean"&&typeof a.close_after_launch=="boolean"&&typeof a.check_announcements=="boolean"&&typeof a.flatpak_rich_presence=="boolean"&&typeof a.runelite_use_custom_jar=="boolean"&&typeof a.selected=="object"&&Object.values(Re).includes(a.selected.game)&&Object.values(rn).includes(a.selected.client)&&(typeof a.selected.user_id=="string"||a.selected.user_id===null)&&typeof a.userDetails=="object"}const{config:r}=O;if(t)try{const a=JSON.parse(t);typeof a.check_announcements>"u"&&(a.check_announcements=!0,O.configHasPendingChanges=!0),typeof a.close_after_launch>"u"&&(a.close_after_launch=!1,O.configHasPendingChanges=!0),typeof a.discard_expired_sessions>"u"&&(a.discard_expired_sessions=!0,O.configHasPendingChanges=!0),n(a)?r.set(a):(A.error("The config saved on disk is not the correct format. It has been restored to default."),O.configHasPendingChanges=!0)}catch{A.error("Unable to parse config, restoring to default"),O.configHasPendingChanges=!0}else O.configHasPendingChanges=!0;Wo(O.config,()=>{O.configHasPendingChanges=!0})}const O={initialized:xn(!1),configHasPendingChanges:!1,pluginConfigHasPendingChanges:!1,config:xn(Go),sessions:xn([])};let pr=!1,hr=!1;class ce{static async login(t,n){const r=await Dn.buildSession(t,n);if(!r.ok)return re(r.error);const a=r.value,i=Ce(O.sessions).findIndex(u=>u.user.userId===t.sub);return i!==-1?O.sessions.update(u=>(u[i]=a,u)):(O.sessions.update(u=>(u.push(a),u)),O.config.update(u=>(u.selected.user_id=a.user.userId,u))),nt(a)}static async logout(t){const{sessions:n,config:r}=O;return n.update(a=>{const o=a.findIndex(i=>i.user.userId===t);return o>-1&&(Ie.revokeOauthCreds(a[o].tokens.access_token),a.splice(o,1)),a}),r.update(a=>(typeof a.userDetails[t]<"u"&&delete a.userDetails[t],a.selected.user_id===t&&(a.selected.user_id=null),a)),Ce(n)}static postJSON(t,n,r=null){const a=JSON.stringify(n);return fetch(t,{method:"POST",body:a,headers:{"Content-Type":"application/json"}}).then(i=>{i.ok||i.text().then(u=>A.error(`${t} error: ${i.status}: ${u}`)),r&&r(i)})}static saveConfig(t=!0){if(pr||t&&!O.configHasPendingChanges)return;pr=!0;const n=Ce(O.config);return n.rs_launch_command===""&&(n.rs_launch_command=null),n.osrs_launch_command===""&&(n.osrs_launch_command=null),n.runelite_launch_command===""&&(n.runelite_launch_command=null),n.hdos_launch_command===""&&(n.hdos_launch_command=null),this.postJSON("/save-config",n,()=>pr=!1),n}static savePluginConfig(t=!0){hr||t&&!O.pluginConfigHasPendingChanges||(hr=!0,this.postJSON("/save-plugin-config",$.pluginConfig,()=>hr=!1))}static async saveCredentials(){return this.postJSON("/save-credentials",Ce(O.sessions))}static async openFilePicker(){const t=await fetch("/jar-file-picker");return t.status===200?t.text():null}static findSession(t){return Ce(O.sessions).find(r=>r.user.userId===t)}static findAccount(t,n){return t.find(r=>r.accountId==n)}}const Lr=xn([]),Vo="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Vo);Aa();var Jo=P("<main><!></main>");function na(e,t){const n=()=>Ee(o,"$config",r),[r,a]=Xe(),{config:o}=O;let i=Me(()=>n().use_dark_theme);var u=Jo();let l;var c=L(u);Vn(c,()=>t.children??st),z(f=>l=Oe(u,1,"fixed top-0 h-screen w-screen bg-slate-100 text-xs text-slate-900 duration-200 sm:text-sm md:text-base dark:bg-slate-900 dark:text-slate-50",null,l,f),[()=>({dark:v(i)})]),x(e,u),a()}var Yo=P('<div class="flex h-full items-center justify-center"><img class="h-60 w-60 animate-spin" src="svgs/circle-notch-solid.svg" alt="loading"/></div>');function Xo(e,t){be(t,!1);const n=window.opener;$.env==null&&o("BoltEnv is not defined. Please close and re-open Bolt to try again.");async function r(u){const l=nn.get("auth_verifier");if(!l)return o("Verifier token has expired. Please try signing in again."),null;const{clientid:c,redirect:f}=$.env,d=await Ie.getOAuthToken($.env.origin,c,l,f,u);return d.ok?d.value:(o(`Fetching OAuth token failed. ${d.error}`),null)}async function a(u){const l=nn.get("auth_nonce"),c=Ie.validateIdToken(u,l??"");if(!c.ok)return o(c.error),null;const f=await Ie.getSessionId($.env.auth_api,u);return f.ok?f.value:(o(`Unable to retreive session id. ${f.error}`),null)}function o(u){i({type:"authFailed",reason:u}),fetch("/close")}function i(u){n.postMessage(u,window.location.origin)}zr(async()=>{const u=new URLSearchParams(window.location.search),l=u.get("code"),c=u.get("state"),f=u.get("id_token");if(f==null&&l&&c){const d=await r(l);if(!d)return o("tokens object is null.");i({type:"authTokenUpdate",tokens:d});const h=crypto.randomUUID();Ie.navigateToAuthConsent($.env.origin,d.id_token,h)}else if(f&&l&&c){const d=await a(f);if(!d)return o("sessionId is null");i({type:"authSessionUpdate",sessionId:d}),fetch("/close")}else o("Authentication server did not response with the appropriate parameters. Please try again later.")}),Fo(()=>{nn.remove("auth_verifier"),nn.remove("auth_nonce")}),Yt(),na(e,{children:(u,l)=>{var c=Yo();x(u,c)}}),we()}var Zo=(e,t,n)=>{e.key==="Escape"&&(e.preventDefault(),t()&&n())},Ko=P('<button class="absolute right-3 top-3 rounded-full bg-rose-500 p-[2px] shadow-lg duration-200 hover:rotate-90 hover:opacity-75"><img src="svgs/xmark-solid.svg" class="h-5 w-5" alt="Close"/></button>'),Qo=P("<dialog><!> <!></dialog>");function er(e,t){be(t,!0);const n=()=>Ee(o,"$config",r),[r,a]=Xe(),{config:o}=O;let i=Me(()=>n().use_dark_theme),u=Wt(t,"class",3,""),l=Wt(t,"canSelfClose",3,!0),c=Wt(t,"onClose",3,()=>{}),f,d=se(!1);function h(){f.showModal(),C(d,!0)}function p(){c()(),f.close(),C(d,!1)}var _={open:h,close:p},g=Qo();g.__keydown=[Zo,l,p],g.__mousedown=S=>{f===S.target&&p()};let m;var w=L(g);{var b=S=>{var R=Ko();R.__click=p,x(S,R)};Z(w,S=>{l()&&S(b)})}var E=y(w,2);{var H=S=>{var R=ut(),M=G(R);Vn(M,()=>t.children??st),x(S,R)};Z(E,S=>{v(d)&&S(H)})}kt(g,S=>f=S,()=>f),z(S=>m=Oe(g,1,`${u()??""} backdrop max-h-[90%] max-w-[90%] overflow-auto rounded-xl text-inherit focus-visible:outline-none`,"svelte-1nslvnn",m,S),[()=>({dark:v(i)})]),x(e,g);var U=we(_);return a(),U}ot(["keydown","mousedown","click"]);var ei=(e,t)=>v(t).close(),ti=P('<p class="p-2"></p> <p class="p-2"></p> <button class="m-5 rounded-lg border-2 border-blue-500 p-2 duration-200 hover:opacity-75">I Understand</button>',1);function ni(e,t){be(t,!1);const n=()=>Ee(o,"$sessions",r),[r,a]=Xe(),{sessions:o}=O;let i=ze();zr(()=>{n().length==0&&v(i).open()}),Yt(),kt(er(e,{canSelfClose:!1,class:"w-1/2 text-center",children:(u,l)=>{var c=ti(),f=G(c);f.textContent=atob("Qm9sdCBpcyBhbiB1bm9mZmljaWFsIHRoaXJkLXBhcnR5IGxhdW5jaGVyLiBJdCdzIGZyZWUgYW5kIG9wZW4tc291cmNlIHNvZnR3YXJlIGxpY2Vuc2VkIHVuZGVyIEFHUEwgMy4wLg==");var d=y(f,2);d.textContent=atob("SmFnZXggaXMgbm90IHJlc3BvbnNpYmxlIGZvciBhbnkgcHJvYmxlbXMgb3IgZGFtYWdlIGNhdXNlZCBieSB1c2luZyB0aGlzIHByb2R1Y3Qu");var h=y(d,2);h.__click=[ei,i],x(u,c)},$$slots:{default:!0},$$legacy:!0}),u=>C(i,u),()=>v(i)),we(),a()}ot(["click"]);const He={method:"GET"},ri={"Content-Type":"application/octet-stream"};let gr=null;const si=120*1e3,ai="https://api.github.com/repos/runelite/launcher/releases",oi="https://cdn.hdos.dev/client/getdown.txt",tr=e=>e?{method:"POST",headers:ri,body:e}:He,wt=(e,t,n,r)=>{fetch(e,t).then(a=>{a.ok?n(a):(a.text().then(o=>A.error(`request failed: ${a.url}: ${a.status}: ${o}`)),r())}).catch(()=>{A.error(`request failed: ${e}: connection error`),r()})},Vr=async(e,t,n,r,a)=>{const o=h=>{A.error(`error downloading: ${h}`),r()};A.info(t);const i=h=>A.updateLogAtIndex(0,`${t} ${h}`);if(!e.body)return o("no HTTP response body");const u=e.body.getReader();if(!u)return o("invalid HTTP response");const l=e.headers.get("content-length")??a;if(!l)return o("cannot estimate download size");const c=parseInt(l);if(!l)return o("cannot estimate download size");const f=new Uint8Array(c);let d=0;for(;;){const h=await u.read();if(h.done)break;const p=h.value;f.set(p,d),d+=p.length;const _=(Math.round(1e3*d/c)/10).toFixed(1);i(_)}i("done"),n(f)};function ii(e,t,n){const r=(u,l)=>{const c={},f=Ce(O.config);u&&(c.hash=u),e&&(c.jx_session_id=e),t&&(c.jx_character_id=t),n&&(c.jx_display_name=n),f.rs_launch_command&&f.rs_launch_command.length>0&&(c.launch_command=f.rs_launch_command),f.rs_plugin_loader&&(c.plugin_loader="1"),f.use_custom_rs_config_uri&&f.rs_config_uri?c.config_uri=f.rs_config_uri:c.config_uri=$.env.default_config_uri,fetch("/launch-rs3-deb?".concat(new URLSearchParams(c).toString()),tr(l)).then(d=>{d.text().then(h=>A.info(`game launch status: '${h.trim()}'`)),d.ok&&(u&&($.rs3debInstalledHash=u),f.close_after_launch&&!f.rs_plugin_loader&&fetch("/close"))})},a=()=>{$.rs3debInstalledHash&&r()},o=$.env.content_url,i=o.concat("dists/trusty/non-free/binary-amd64/Packages");wt(i,He,u=>u.text().then(l=>{const c=Object.fromEntries(l.split(`
`).map(f=>f.split(": ")));if(!c.Filename||!c.Size||!c.SHA256){A.error(`could not parse package data from URL: ${i}`),a();return}if(c.SHA256===$.rs3debInstalledHash){A.info("game client is up-to-date"),r();return}wt(o.concat(c.Filename),He,f=>Vr(f,"downloading RS3 client...",d=>r(c.SHA256,d),r,c.Size),a)}),a)}function ra(e,t,n,r){const a=r?"/launch-runelite-jar-configure?":"/launch-runelite-jar?",o=Ce(O.config),i=(l,c,f)=>{const d={};l&&(d.id=l),f&&(d.jar_path=f),e&&(d.jx_session_id=e),t&&(d.jx_character_id=t),n&&(d.jx_display_name=n),o.runelite_launch_command&&o.runelite_launch_command!==""&&(d.launch_command=o.runelite_launch_command),o.flatpak_rich_presence&&(d.flatpak_rich_presence=""),fetch(a.concat(new URLSearchParams(d).toString()),tr(c)).then(h=>{h.text().then(p=>A.info(`game launch status: '${p.trim()}'`)),h.ok&&(l&&($.runeLiteInstalledId=l),o.close_after_launch&&!r&&fetch("/close"))})},u=()=>{$.runeLiteInstalledId&&i()};if(o.runelite_use_custom_jar){i(null,null,o.runelite_custom_jar);return}if($.runeLiteInstalledId!==null&&gr!==null&&gr+si>Date.now()){i();return}wt(ai,He,l=>l.json().then(c=>{gr=Date.now();const f=c.map(d=>d.assets).flat().find(d=>d.name.toLowerCase()=="runelite.jar");if(!f){A.info("note: no runelite releases found, so skipping update check"),u();return}if(f.id==$.runeLiteInstalledId){A.info("game is up-to-date"),i();return}wt(f.browser_download_url,He,d=>Vr(d,"downloading RuneLite launcher...",h=>i(f.id,h),u,f.size),u)}),u)}function li(e,t,n){const r=Ce(O.config),a=(i,u)=>{const l={};i&&(l.version=i),e&&(l.jx_session_id=e),t&&(l.jx_character_id=t),n&&(l.jx_display_name=n),r.hdos_launch_command&&r.hdos_launch_command.length>0&&(l.launch_command=r.hdos_launch_command),fetch("/launch-hdos-jar?".concat(new URLSearchParams(l).toString()),tr(u)).then(c=>{c.text().then(f=>A.info(`game launch status: '${f.trim()}'`)),c.ok&&(i&&($.hdosInstalledVersion=i),r.close_after_launch&&fetch("/close"))})},o=()=>{$.hdosInstalledVersion&&a()};wt(oi,He,i=>i.text().then(u=>{const l=u.match(/^launcher\.version *= *(.*?)$/m);if(!l||l.length<2){A.error("couldn't parse latest launcher version"),o();return}const c=l[1];if(c===$.hdosInstalledVersion){A.info("game is up-to-date"),a();return}wt(`https://cdn.hdos.dev/launcher/v${c}/hdos-launcher.jar`,He,f=>Vr(f,"downloading HDOS launcher...",d=>a(c,d),o),o)}),o)}function mr(){fetch("/list-game-clients",He).then(e=>{e.ok||e.text().then(t=>A.error(`failed to get client list: ${e.status}: ${t}`))})}function _s(e,t,n,r,a){const o=`${t?"osrs":$.env.provider}-${e?"win":"mac"}`,i=t?"osrs":"rs3",u=e?"exe":"app",l=`${i}${u}InstalledHash`,c=(d,h)=>{const p={},_=Ce(O.config),g=t?_.osrs_launch_command:_.rs_launch_command;d&&(p.hash=d),n&&(p.jx_session_id=n),r&&(p.jx_character_id=r),a&&(p.jx_display_name=a),g&&g!==""&&(p.launch_command=g),t||(_.rs_plugin_loader&&(p.plugin_loader="1"),p.config_uri=_.use_custom_rs_config_uri&&_.rs_config_uri?_.rs_config_uri:$.env.default_config_uri);const m=w=>fetch(`/launch-${i}-${u}?${new URLSearchParams(p).toString()}`,w).then(b=>{b.text().then(E=>A.info(`game launch status: '${E.trim()}'`)),b.ok&&(d&&($[l]=d),_.close_after_launch&&(t||!_.rs_plugin_loader)&&fetch("/close"))});h?h.then(w=>m(tr(w))):m(He)},f=()=>{$.hdosInstalledVersion&&c()};wt(`${$.env.direct6_url}${o}/${o}.json`,He,d=>d.text().then(h=>{const p=JSON.parse(atob(h.split(".")[1])).environments.production;if($[l]===p.id){A.info("game client is up-to-date"),c();return}A.info(`downloading client version ${p.version}...`),wt(`${$.env.direct6_url}${o}/catalog/${p.id}/catalog.json`,He,_=>_.text().then(g=>{const m=JSON.parse(atob(g.split(".")[1])),w=b=>b.replace(/^http:\/\/(.{5})-akamai\.aws\.snxd\.com\//i,"https://$1.akamaized.net/").replace(/^http:/i,"https:");wt(w(m.metafile),He,b=>b.text().then(E=>{const H=JSON.parse(atob(E.split(".")[1])),U=H.pieces.digests.map(M=>{const T=atob(M).split("").map(ue=>ue.charCodeAt(0).toString(16).padStart(2,"0")).join(""),J=w(m.config.remote.baseUrl).concat(m.config.remote.pieceFormat.replace("{SubString:0,2,{TargetDigest}}",T.substring(0,2)).replace("{TargetDigest}",T));return fetch(J,He).then(ue=>ue.blob().then(X=>{const ve=new DecompressionStream("gzip");return new Response(X.slice(6).stream().pipeThrough(ve)).blob()}))});let S=0,R=null;for(let M=0;M<H.files.length;M+=1)if(e?H.files[M].name.endsWith(".exe"):H.files[M].name.includes(".app/Contents/MacOS/"))if(R!==null){A.error(`can't parse ${b.url}: file list has multiple possibilities for main exe`),f();return}else R=H.files[M].size;else R===null&&(S+=H.files[M].size);if(R===null){A.error(`can't parse ${b.url}: file list has no possibilities for main exe`),f();return}Promise.all(U).then(M=>{const T=new Blob(M).slice(S,S+R);c(H.id,T.arrayBuffer())})}),f)}),f)}),f)}var ui=(e,t)=>{v(t).close()},ci=(e,t,n,r,a)=>{v(t)(v(n),v(r)),v(a).close()},fi=P('<div><h2 class="text-3xl font-extrabold">Game is offline</h2> <br/> <p>This game appears to be offline for maintenance or an update. Launch anyway?</p> <div class="align-bottom"><button class="mx-1 mb-2 mt-5 w-[45%] rounded-lg bg-blue-500 p-2 font-bold text-black duration-200 hover:opacity-75">No</button> <button class="mx-1 mb-2 mt-5 w-[45%] rounded-lg bg-emerald-500 p-2 font-bold text-black duration-200 hover:opacity-75">Yes</button></div></div>');function di(e,t){be(t,!1);let n=ze(),r=ze(),a=ze(),o=ze();function i(l,c,f){C(o,l),C(r,c),C(a,f),v(n).open()}var u={open:i};return kt(er(e,{class:"h-fit w-3/5 px-5 py-3 text-center",children:(l,c)=>{var f=fi(),d=y(L(f),6),h=L(d);h.__click=[ui,n];var p=y(h,2);p.__click=[ci,o,r,a,n],x(l,f)},$$slots:{default:!0},$$legacy:!0}),l=>C(n,l),()=>v(n)),ea(t,"open",i),we(u)}ot(["click"]);const _i=()=>fetch("/open-external-url",{method:"POST",body:"https://bolt.adamcake.com/plugins"});var vi=(e,t)=>C(t,!1),pi=P("<p>(start an RS3 game client with plugins enabled and it will be listed here.)</p>"),hi=(e,t,n,r,a,o,i)=>{C(t,v(n).uid,!0),C(r,!0),C(a,!1),C(o,""),C(i,null)},gi=P("<button> </button> <br/>",1),mi=(e,t)=>C(t,null),bi=P('<option class="dark:bg-slate-900"> </option>'),wi=(e,t,n)=>{C(t,!v(t)),C(n,"")},yi=(e,t,n,r)=>{t(v(n)),C(r,!1),C(n,"")},ki=(e,t,n)=>{C(t,!1),C(n,"")},xi=P('<label for="plugin-updater-url-input">URL:</label> <textarea rows="1" id="plugin-updater-url-input" class="w-[50%] max-w-[60%] resize-x rounded border-2 border-slate-300 bg-slate-100 text-slate-950 dark:border-slate-800"></textarea> <button title="Confirm" class="select-none rounded-sm bg-emerald-500 hover:opacity-75"><img src="svgs/check-solid.svg" class="h-5 w-5" alt="Confirm"/></button> <button title="Close URL entry" class="select-none rounded-sm bg-rose-500 hover:opacity-75"><img src="svgs/xmark-solid.svg" class="h-5 w-5" alt="Close"/></button> <br/><br/>',1),Si=P('<br/> <span class="pb-4 text-xl font-bold italic text-slate-600"> </span>',1),$i=P('<p class="pb-4 text-xl font-bold"> <!></p> <p> </p> <br/>',1),Ei=P("<p>error</p> <br/>",1),Pi=P("<p>loading...</p>"),Li=(e,t,n)=>{const r=t[Q(n)].path;fetch(r?"/browse-directory?".concat(new URLSearchParams({path:r}).toString()):"/browse-plugin-data?".concat(new URLSearchParams({id:Q(n)}).toString()))},Ri=(e,t)=>fetch("/browse-plugin-config?".concat(new URLSearchParams({id:Q(t)}).toString())),Ci=(e,t,n,r)=>t(v(n),Q(r)),Ii=P('<button class="m-1 mx-auto w-[min(144px,_25%)] select-none rounded-lg p-2 font-bold text-black duration-200 enabled:bg-blue-500 enabled:hover:opacity-75 disabled:bg-gray-500">Check updates</button> &nbsp;',1),Ti=P('<!> <button class="mx-auto mb-1 w-[min(144px,_25%)] select-none rounded-lg bg-blue-500 p-2 font-bold text-black duration-200 hover:opacity-75">Browse data</button> &nbsp; <button class="mx-auto mb-1 w-[min(144px,_25%)] select-none rounded-lg bg-blue-500 p-2 font-bold text-black duration-200 hover:opacity-75">Browse config</button> <br/> <!> <button class="m-1 mx-auto w-[min(144px,_25%)] select-none rounded-lg p-2 font-bold text-black duration-200 enabled:bg-rose-500 enabled:hover:opacity-75 disabled:bg-gray-500">Remove</button>',1),Oi=P(`<p>You have no plugins installed. You can install plugins either from an updater URL, or by
						downloading them onto your computer and selecting the "bolt.json" file.</p>`),Ai=P('<span class="align-middle"><button class="mx-1 aspect-square w-9 select-none rounded-md bg-blue-500 p-1 text-[20px] font-bold duration-200 enabled:hover:opacity-75 disabled:bg-gray-500" title="Install plugin from updater URL"><img src="svgs/download-solid.svg" alt="Install plugin from updater URL"/></button> <button class="aspect-square w-9 select-none rounded-md bg-blue-500 p-1 text-[20px] font-bold duration-200 enabled:hover:opacity-75 disabled:bg-gray-500" title="Install plugin from local directory"><img src="svgs/folder-solid.svg" alt="Install plugin from local directory"/></button></span> <br/> <!> <!>',1),Ui=(e,t,n,r,a,o,i)=>t(Q(n),Q(r),v(a)??null,v(o).main??i),Ni=P('<button class="mx-auto mb-1 w-auto select-none rounded-lg bg-emerald-500 p-2 font-bold text-black duration-200 hover:opacity-75"> </button>'),Hi=P("<p>(no plugins installed)</p>"),Mi=P("<p>can't start plugin: does not appear to be configured</p>"),Di=(e,t,n,r)=>{t(Q(n),v(r).uid)},ji=P('<p> <button class="select-none rounded-sm bg-rose-500 shadow-lg hover:opacity-75"><img src="svgs/xmark-solid.svg" class="h-4 w-4" alt="Close"/></button></p>'),Fi=P("<p> </p>"),Bi=P('<!> <br/> <br/> <hr class="p-1 dark:border-slate-700"/> <!>',1),qi=P("<p>error</p>"),Wi=P("<p>loading...</p>"),Gi=P("<br/> <!>",1),zi=P('<select class="mx-auto mb-4 w-[min(280px,_45%)] cursor-pointer rounded-lg border-2 border-slate-300 bg-inherit p-2 text-inherit duration-200 hover:opacity-75 dark:border-slate-800"></select> <!>',1),Vi=P("<p>error</p>"),Ji=P('<p class="text-red-500"> </p>'),Yi=P("<p> </p>"),Xi=P("<br/><br/> <!>",1),Zi=P('<div class="left-0 float-left h-full w-[min(180px,_50%)] overflow-hidden border-r-2 border-slate-300 pt-2 dark:border-slate-800"><button>Manage Plugins</button> <hr class="p-1 dark:border-slate-700"/> <!></div> <div class="h-full pt-10"><!> <!></div> <div class="absolute bottom-2 right-4"><button class="m-0 cursor-pointer select-none border-none bg-transparent p-0 text-sm text-gray-500 underline">about plugins</button></div>',1);function Ki(e,t){be(t,!0);const n=()=>Ee(Lr,"$clientList",r),[r,a]=Xe();let o,i=se(null),u=se(!1),l=Mt($.pluginConfig);const c=$.platform==="windows"?"\\":"/",f="bolt.json",d=c.concat(f),h="main.lua";function p(){C(q,!1),o.open()}const _=()=>{$.pluginConfig=l,ce.savePluginConfig()},g=k=>{console.log(k),C(i,k,!0),C(u,!1)},m=k=>{console.error(k),C(i,k,!0),C(u,!0)},w=k=>new Promise((N,W)=>{const ye=k.concat(k.endsWith(c)?f:d);var V=new XMLHttpRequest;V.onreadystatechange=()=>{V.readyState==4&&(V.status==200?N(JSON.parse(V.responseText)):W(V.responseText))},V.open("GET","/read-json-file?".concat(new URLSearchParams({path:ye}).toString()),!0),V.send()}),b=k=>fetch("/get-plugindir-json?".concat(new URLSearchParams({id:k}).toString())).then(N=>N.ok?N.json():null),E=k=>{const N=l[k];if(!N)return null;const W=N.path;return W?w(W):b(k)},H=()=>{const k=Object.keys(l);let N;do N=crypto.randomUUID();while(k.includes(N));return N},U="(unnamed)",S="(new character)",R=(k,N)=>{w(k).then(W=>{C(B,H(),!0),l[Q(B)]={name:W.name??U,path:k,version:W.version},$.pluginConfig=l,O.pluginConfigHasPendingChanges=!0}).catch(W=>m(`config file '${N}' couldn't be fetched, reason: ${W}`))},M=k=>{g("downloading..."),fetch(k).then(async N=>{if(!N.ok){m(`can't install plugin: updater URL returned ${N.status}: ${N.statusText}`);return}const W=await N.json();if(W.url){const ye=await fetch(W.url);if(!ye.ok){m(`can't install plugin: remote download URL returned ${N.status}: ${N.statusText}`);return}const V=await ye.arrayBuffer();if(W.sha256){const Ke=await crypto.subtle.digest("SHA-256",V),Xt=Array.from(new Uint8Array(Ke)).map(mn=>mn.toString(16).padStart(2,"0")).join("");if(W.sha256!==Xt){m("can't install plugin: incorrect file hash");return}}const pe=H();if(!(await fetch("/install-plugin?".concat(new URLSearchParams({id:pe}).toString()),{method:"POST",body:V})).ok){m(`can't install plugin: ${N.statusText}`);return}const dt=await b(pe);dt?(C(B,pe,!0),l[Q(B)]={name:dt.name??U,version:dt.version,updaterURL:k,sha256:W.sha256},$.pluginConfig=l,O.pluginConfigHasPendingChanges=!0,g(`plugin '${dt.name}' installed`)):m(`can't install plugin: ${f} not found`)}}).catch(()=>{m("can't install plugin: unhandled exception")})};let T=se(!1);const J=()=>{C(T,!0);var k=new XMLHttpRequest;k.onreadystatechange=()=>{if(k.readyState==4&&(C(T,!1),k.status==200))if(k.responseText.endsWith(d)){const N=k.responseText.substring(0,k.responseText.length-f.length);R(N,k.responseText)}else m(`selection '${k.responseText}' is not named ${f}; ignored`)},k.open("GET","/json-file-picker",!0),k.send()};mr();const ue=(k,N,W,ye)=>{let V=null;if(W){const Ze=$.platform==="windows"?W.replaceAll("\\","/"):W;V=Ze.endsWith(c)?Ze:Ze.concat("/")}var pe=new XMLHttpRequest;pe.onreadystatechange=()=>{pe.readyState==4&&(mr(),A.info(`Start-plugin status: ${pe.statusText.trim()}`))},V?pe.open("GET","/start-plugin?".concat(new URLSearchParams({client:k.toString(),id:N,main:ye,path:V}).toString()),!0):pe.open("GET","/start-plugin?".concat(new URLSearchParams({client:k.toString(),id:N,main:ye}).toString()),!0),pe.send()},X=(k,N)=>{var W=new XMLHttpRequest;W.onreadystatechange=()=>{W.readyState==4&&(mr(),A.info(`Stop-plugin status: ${W.statusText.trim()}`))},W.open("GET","/stop-plugin?".concat(new URLSearchParams({client:k.toString(),uid:N.toString()}).toString()),!0),W.send()},ve=(k,N)=>{const W=k.updaterURL;fetch(W).then(async ye=>{if(!ye.ok){m(`can't update plugin: updater URL returned ${ye.status}: ${ye.statusText}`);return}let V=await ye.json();if(!V.url){g(`can't update plugin '${k.name}': no remote download URL is configured`);return}let pe=!1;if(V.sha256?k.sha256!==V.sha256&&(pe=!0):V.version&&k.version!==V.version&&(pe=!0),pe){const Ze=await fetch(V.url);if(!Ze.ok){m(`can't update plugin: remote download URL returned ${Ze.status}: ${Ze.statusText}`);return}const dt=await Ze.arrayBuffer();if(V.sha256){const Xt=await crypto.subtle.digest("SHA-256",dt),mn=Array.from(new Uint8Array(Xt)).map(nr=>nr.toString(16).padStart(2,"0")).join("");if(V.sha256!==mn){m(`can't update plugin '${k.name}': incorrect file hash`);return}}fetch("/install-plugin?".concat(new URLSearchParams({id:N}).toString()),{method:"POST",body:dt});const Ke=await b(N);Ke?(V.sha256&&(k.sha256=V.sha256),Ke.name&&(k.name=Ke.name),Ke.version&&(k.version=Ke.version),O.pluginConfigHasPendingChanges=!0,g(`plugin '${Ke.name}' updated`)):m(`can't update plugin '${k.name}': ${f} not found`)}else g(`plugin '${k.name}' is already up-to-date`)})};var B=se(""),fe=se(!1),Fe=se(0);let q=se(!1),Y=se("");fn(()=>{n().some(k=>k.uid===Q(Fe))||C(fe,!1)});let F=Me(()=>l[Q(B)]),te=Me(()=>E(Q(B)));fn(()=>{v(te)&&v(te).then(k=>{let N=!1;k.name!==v(F).name&&(v(F).name=k.name,N=!0),k.version!==v(F).version&&(v(F).version=k.version,N=!0),N&&(C(F,v(F)),O.pluginConfigHasPendingChanges=!0)})});let Pe=Me(()=>v(F)?v(F).path:null);var oe={open:p};kt(er(e,{class:"h-[90%] w-[90%] text-center",onClose:_,children:(k,N)=>{var W=Zi(),ye=G(W),V=L(ye);V.__click=[vi,fe];var pe=y(V,4);{var Ze=de=>{var qe=pi();x(de,qe)},dt=de=>{var qe=ut(),St=G(qe);Ct(St,1,n,Dt,(bn,At)=>{var Qe=gi(),ne=G(Qe);ne.__click=[hi,Fe,At,fe,q,Y,i];var Ae=L(ne);z(()=>{Oe(ne,1,`m-1 h-[28px] w-[95%] select-none rounded-lg border-2 ${Q(fe)&&Q(Fe)===v(At).uid?"border-black bg-blue-500 text-black":"border-blue-500 text-black dark:text-white"} hover:opacity-75`),he(Ae,v(At).identity||S)}),x(bn,Qe)}),x(de,qe)};Z(pe,de=>{n().length==0?de(Ze):de(dt,!1)})}var Ke=y(ye,2),Xt=L(Ke);{var mn=de=>{var qe=zi(),St=G(qe);St.__change=[mi,i],Ct(St,21,()=>Object.entries(l),Dt,(ne,Ae)=>{var Ut=Me(()=>ba(v(Ae),2));let We=()=>v(Ut)[0],Ue=()=>v(Ut)[1];var it=bi(),Zt=L(it),Kt={};z(()=>{he(Zt,Ue().name??U),Kt!==(Kt=We())&&(it.value=(it.__value=We())??"")}),x(ne,it)});var bn=y(St,2);{var At=ne=>{var Ae=Ai(),Ut=G(Ae),We=L(Ut);We.__click=[wi,q,Y];var Ue=y(We,2);Ue.__click=J;var it=y(Ut,4);{var Zt=ie=>{var _e=xi(),et=y(G(_e),2),$t=y(et,2);$t.__click=[yi,M,Y,q];var _t=y($t,2);_t.__click=[ki,q,Y],jt(et,()=>v(Y),ke=>C(Y,ke)),x(ie,_e)};Z(it,ie=>{v(q)&&ie(Zt)})}var Kt=y(it,2);{var rr=ie=>{var _e=ut(),et=G(_e);{var $t=_t=>{var ke=Ti(),vt=G(ke);ls(vt,()=>v(te),xe=>{var Le=Pi();x(xe,Le)},(xe,Le)=>{var tt=$i(),Pt=G(tt),Nt=L(Pt),or=y(Nt);{var la=ir=>{var Yr=Si(),ca=y(G(Yr),2),fa=L(ca);z(()=>he(fa,`v${v(Le).version??""}`)),x(ir,Yr)};Z(or,ir=>{v(Le).version&&ir(la)})}var Jr=y(Pt,2),ua=L(Jr);z(()=>{he(Nt,`${v(Le).name??U??""} `),Oe(Jr,1,Mn(v(Le).description?null:"italic")),he(ua,v(Le).description??"no description")}),x(xe,tt)},xe=>{var Le=Ei();x(xe,Le)});var Cn=y(vt,2);Cn.__click=[Li,l,B];var In=y(Cn,2);In.__click=[Ri,B];var Et=y(In,4);{var Tn=xe=>{var Le=Ii(),tt=G(Le);tt.__click=[Ci,ve,F,B],x(xe,Le)};Z(Et,xe=>{v(F).updaterURL&&xe(Tn)})}var ar=y(Et,2);ar.__click=()=>{C(te,null),O.pluginConfigHasPendingChanges=!0;const xe=l[Q(B)];xe&&(fetch("/uninstall-plugin?".concat(new URLSearchParams({id:Q(B),delete_data_dir:typeof xe.path=="string"?"0":"1"}).toString())),g(`plugin '${xe.name}' uninstalled`),delete l[Q(B)])},x(_t,ke)};Z(et,_t=>{Object.keys(l).includes(Q(B))&&v(te)!==null&&_t($t)})}x(ie,_e)},sr=ie=>{var _e=Oi();x(ie,_e)};Z(Kt,ie=>{Object.entries(l).length!==0?ie(rr):ie(sr,!1)})}z(()=>{We.disabled=!$.hasLibArchive||v(T),Ue.disabled=v(T)}),x(ne,Ae)},Qe=ne=>{var Ae=Gi(),Ut=y(G(Ae),2);ls(Ut,()=>v(te),We=>{var Ue=Wi();x(We,Ue)},(We,Ue)=>{var it=Bi(),Zt=G(it);{var Kt=ie=>{var _e=Ni();_e.__click=[Ui,ue,Fe,B,Pe,Ue,h];var et=L(_e);z(()=>he(et,`Start ${v(Ue).name??""}`)),x(ie,_e)},rr=ie=>{var _e=ut(),et=G(_e);{var $t=ke=>{var vt=Hi();x(ke,vt)},_t=ke=>{var vt=Mi();x(ke,vt)};Z(et,ke=>{Object.entries(l).length===0?ke($t):ke(_t,!1)},!0)}x(ie,_e)};Z(Zt,ie=>{v(Ue)&&v(Ue).main&&Object.keys(l).includes(Q(B))?ie(Kt):ie(rr,!1)})}var sr=y(Zt,8);Ct(sr,1,n,Dt,(ie,_e)=>{var et=ut(),$t=G(et);{var _t=ke=>{var vt=ut(),Cn=G(vt);Ct(Cn,17,()=>v(_e).plugins,Dt,(In,Et)=>{var Tn=ut(),ar=G(Tn);{var xe=tt=>{var Pt=ji(),Nt=L(Pt),or=y(Nt);or.__click=[Di,X,Fe,Et],z(()=>he(Nt,`${l[v(Et).id].name??v(Et).id??""} `)),x(tt,Pt)},Le=tt=>{var Pt=Fi(),Nt=L(Pt);z(()=>he(Nt,v(Et).id)),x(tt,Pt)};Z(ar,tt=>{Object.keys(l).includes(v(Et).id)?tt(xe):tt(Le,!1)})}x(In,Tn)}),x(ke,vt)};Z($t,ke=>{v(_e).uid===Q(Fe)&&ke(_t)})}x(ie,et)}),x(We,it)},We=>{var Ue=qi();x(We,Ue)}),x(ne,Ae)};Z(bn,ne=>{Q(fe)?ne(Qe,!1):ne(At)})}Gr(St,()=>Q(B),ne=>C(B,ne)),x(de,qe)},nr=de=>{var qe=Vi();x(de,qe)};Z(Xt,de=>{$.hasBoltPlugins?de(mn):de(nr,!1)})}var sa=y(Xt,2);{var aa=de=>{var qe=Xi(),St=y(G(qe),3);{var bn=Qe=>{var ne=Ji(),Ae=L(ne);z(()=>he(Ae,`[error] ${v(i)??""}`)),x(Qe,ne)},At=Qe=>{var ne=Yi(),Ae=L(ne);z(()=>he(Ae,`[info] ${v(i)??""}`)),x(Qe,ne)};Z(St,Qe=>{v(u)?Qe(bn):Qe(At,!1)})}x(de,qe)};Z(sa,de=>{v(i)&&de(aa)})}var oa=y(Ke,2),ia=L(oa);ia.__click=[_i],z(()=>Oe(V,1,`mx-auto mb-2 w-[95%] select-none rounded-lg border-2 ${Q(fe)?"border-blue-500 text-black dark:text-white":"border-black bg-blue-500 text-black"} p-2 font-bold hover:opacity-75`)),x(k,W)},$$slots:{default:!0}}),k=>o=k,()=>o);var Be=we(oe);return a(),Be}ot(["click","change"]);var Qi=P('<option class="dark:bg-slate-900"> </option>'),el=P('<label class="flex flex-col"><span class="text-sm">Game Client</span> <select id="game_client_select" class="w-52 cursor-pointer rounded-lg border-2 border-slate-300 bg-inherit p-2 text-inherit duration-200 hover:opacity-75 dark:border-slate-800"></select></label>'),tl=P('<button class="w-52 rounded-lg p-2 font-bold text-black duration-200 enabled:bg-blue-500 enabled:hover:opacity-75 disabled:bg-gray-500">Plugin menu</button>'),nl=P('<option class="dark:bg-slate-900"><!></option>'),rl=P('<option class="dark:bg-slate-900" disabled selected>No characters</option>'),sl=P('<!> <!> <div class="bg-grad flex h-full flex-col border-slate-300 p-5 duration-200 dark:border-slate-800"><div class="flex flex-col items-center gap-4"><img src="svgs/rocket-solid.svg" alt="Launch icon" class="mb-3 w-24 rounded-3xl bg-gradient-to-br from-rose-500 to-violet-500 p-5"/> <button class="w-52 rounded-lg bg-emerald-500 p-2 font-bold text-black duration-200 enabled:hover:opacity-75 disabled:bg-gray-500">Play</button> <!> <label class="flex flex-col"><span class="text-sm">Character</span> <select id="character_select" class="mx-auto w-52 cursor-pointer rounded-lg border-2 border-slate-300 bg-inherit p-2 text-inherit duration-200 hover:opacity-75 dark:border-slate-800"><option disabled class="dark:bg-slate-900">Select an account</option><!></select></label></div></div>',1);function al(e,t){be(t,!0);const n=()=>Ee(l,"$config",a),r=()=>Ee(c,"$initialized",a),[a,o]=Xe();let i,u,{config:l,initialized:c}=O,f=Me(()=>n().selected.user_id),d=Me(()=>n().userDetails[v(f)??""]?.account_id),h=Me(()=>ce.findSession(n().selected.user_id)?.accounts??[]),p=Wt(t,"psa",15),_=!0;fn(()=>{if(n().check_announcements){const q=n().selected.game==Re.osrs?"osrs":$.env.provider,Y=`${$.env.psa_url}${q}/${q}.json`;fetch(Y,{method:"GET",cache:"no-store"}).then(F=>F.json()).then(F=>{p(F.psaEnabled&&F.psaMessage?F.psaMessage:null),_=!(F.playDisabled??!1)})}else p(null),_=!0});function g(q,Y){if(!v(f))return A.warn("Please log in or select a user to play.");if(!v(d))return A.warn("Please select a character from the select menu.");const F=ce.findSession(n().selected.user_id);if(!F)return A.warn("Unable to launch game, session was not found.");const{session_id:te}=F,Pe=ce.findAccount(F.accounts,v(d));if(!Pe)return A.warn("Unable to launch game, account was not found.");const{accountId:oe,displayName:Be}=Pe,k=$.platform===wr.Windows,N=$.platform===wr.Linux;switch(q){case Re.osrs:switch(Y){case rn.official:_s(k||N,!0,te,oe,Be);break;case rn.runelite:ra(te,oe,Be,!1);break;case rn.hdos:li(te,oe,Be);break}break;case Re.rs3:N?ii(te,oe,Be):_s(k,!1,te,oe,Be);break}}function m(q){const Y=q.target.value;if(!v(f))return;const F=n().userDetails[v(f)];F?(F.account_id=Y,ae(l,I(n).userDetails[v(f)]=F,I(n))):ae(l,I(n).userDetails[v(f)]={account_id:Y},I(n))}var w={launch:g},b=sl(),E=G(b);kt(di(E,{}),q=>i=q,()=>i);var H=y(E,2);kt(Ki(H,{}),q=>u=q,()=>u);var U=y(H,2),S=L(U),R=y(L(S),2);R.__click=()=>{_?g(n().selected.game,n().selected.client):i.open(g,n().selected.game,n().selected.client)};var M=y(R,2);{var T=q=>{var Y=el(),F=y(L(Y),2);Ct(F,5,()=>da[n().selected.game],Dt,(te,Pe)=>{var oe=Qi(),Be=L(oe),k={};z(()=>{he(Be,v(Pe)),k!==(k=v(Pe))&&(oe.value=(oe.__value=v(Pe))??"")}),x(te,oe)}),Gr(F,()=>n().selected.client,te=>ae(l,I(n).selected.client=te,I(n))),x(q,Y)},J=q=>{var Y=ut(),F=G(Y);{var te=Pe=>{var oe=tl();oe.__click=()=>{u.open()},z(()=>{oe.disabled=!$.hasBoltPlugins,bt(oe,"title",$.hasBoltPlugins?null:"This feature is disabled")}),x(Pe,oe)};Z(F,Pe=>{n().selected.game===Re.rs3&&Pe(te)},!0)}x(q,Y)};Z(M,q=>{n().selected.game==Re.osrs?q(T):q(J,!1)})}var ue=y(M,2),X=y(L(ue),2);X.__change=m;var ve=L(X);ve.value=(ve.__value=void 0)??"";var B=y(ve);Ct(B,17,()=>v(h),Dt,(q,Y)=>{var F=nl(),te=L(F);{var Pe=k=>{var N=os();z(()=>he(N,v(Y).displayName)),x(k,N)},oe=k=>{var N=os("New Character");x(k,N)};Z(te,k=>{v(Y).displayName?k(Pe):k(oe,!1)})}var Be={};z(()=>{Be!==(Be=v(Y).accountId)&&(F.value=(F.__value=v(Y).accountId)??"")}),x(q,F)},q=>{var Y=rl();x(q,Y)});var fe;Qs(X),z(()=>{R.disabled=!r(),X.disabled=!r()||n().selected.user_id===null,fe!==(fe=v(d))&&(X.value=(X.__value=v(d))??"",Wr(X,v(d)))}),x(e,b);var Fe=we(w);return o(),Fe}ot(["click","change"]);var ol=P("<li> </li>"),il=P('<div class="fixed bottom-0 h-1/4 w-screen border-t-2 border-t-slate-300 bg-slate-100 duration-200 dark:border-t-slate-800 dark:bg-slate-900"><div class="absolute right-6 top-2"><img src="svgs/circle-info-solid.svg" alt="Message list icon" class="h-7 w-7 rounded-full bg-blue-500 p-[3px] duration-200"/></div> <ol id="message_list" class="h-full list-inside list-disc overflow-y-auto pl-5 pt-1 marker:text-blue-500"></ol></div>');function ll(e,t){be(t,!0);var n=il(),r=y(L(n),2);Ct(r,21,()=>t.logs,Dt,(a,o)=>{let i=()=>v(o).date,u=()=>v(o).severity,l=()=>v(o).content;var c=ol();let f;var d=L(c);z((h,p)=>{f=Oe(c,1,"",null,f,h),he(d,`${p??""}
				- ${l()??""}`)},[()=>({"text-rose-500":u()===Pr.error,"text-orange-700":u()===Pr.warn}),()=>i()?.toLocaleTimeString()]),x(a,c)}),x(e,n),we()}var ul=P('<option class="dark:bg-slate-900"> </option>'),cl=()=>{const{origin:e,redirect:t,clientid:n}=$.env;Ie.openLoginWindow(e,t,n)},fl=async(e,t,n)=>{t().selected.user_id&&(await ce.logout(t().selected.user_id),ce.saveCredentials())},dl=P('<select class="w-full cursor-pointer rounded-lg border-2 border-inherit bg-inherit p-2 text-center"><option disabled class="dark:bg-slate-900">Select a user</option><!></select> <div class="mt-5 flex"><button class="mx-auto mr-2 rounded-lg bg-blue-500 p-2 font-bold text-black duration-200 hover:opacity-75">Log In</button> <button class="mx-auto rounded-lg border-2 border-blue-500 p-2 font-bold duration-200 hover:opacity-75">Log Out</button></div>',1);function _l(e,t){be(t,!1);const n=()=>Ee(u,"$config",a),r=()=>Ee(i,"$sessions",a),[a,o]=Xe(),{sessions:i,config:u}=O;Yt();var l=dl(),c=G(l);z(()=>{n(),_o(()=>{r()})});var f=L(c);f.value=(f.__value=null)??"";var d=y(f);Ct(d,1,r,g=>g.user.userId,(g,m)=>{var w=ul(),b=L(w),E={};z(()=>{he(b,v(m).user.displayName),E!==(E=v(m).user.userId)&&(w.value=(w.__value=v(m).user.userId)??"")}),x(g,w)});var h=y(c,2),p=L(h);p.__click=[cl];var _=y(p,2);_.__click=[fl,n,u],z(()=>_.disabled=!n().selected.user_id),Gr(c,()=>n().selected.user_id,g=>ae(u,I(n).selected.user_id=g,I(n))),x(e,l),we(),o()}ot(["click"]);function vl(e,{callback:t,ignore:n=[]}){const r=a=>{const o=n.some(i=>i.contains(a.target));e&&!e.contains(a.target)&&!a.defaultPrevented&&!o&&t()};return document.addEventListener("click",r,!0),document.addEventListener("contextmenu",r,!0),{destroy(){document.removeEventListener("click",r,!0),document.removeEventListener("contextmenu",r,!0)}}}function pl(e,t,n,r){v(t)?n():r()}var hl=P("<div><!></div>"),gl=P("<div><button><!></button> <!></div>");function ml(e,t){be(t,!0);const n=()=>Ee(o,"$config",r),[r,a]=Xe(),{config:o}=O;let i=Me(()=>n().use_dark_theme),u=Wt(t,"class",3,""),l=Wt(t,"position",3,"bottom"),c=Wt(t,"align",3,"start"),f=se(!1),d=se(void 0);function h(){C(f,!0)}function p(){C(f,!1)}var _={open:h,close:p},g=gl();let m;var w=L(g);w.__click=[pl,f,p,h];var b=L(w);Vn(b,()=>t.children??st),kt(w,S=>C(d,S),()=>v(d));var E=y(w,2);{var H=S=>{var R=hl(),M=L(R);Vn(M,()=>t.content??st),Oo(R,(T,J)=>vl?.(T,J),()=>({callback:p,ignore:[v(d)]})),z(()=>Oe(R,1,`dropdown-color absolute z-20 rounded-lg border-2 ${l()??""} ${c()??""}`,"svelte-11xj3vp")),x(S,R)};Z(E,S=>{v(f)&&S(H)})}z(S=>m=Oe(g,1,`relative h-fit w-fit ${u()??""}`,"svelte-11xj3vp",m,S),[()=>({dark:v(i)})]),x(e,g);var U=we(_);return a(),U}ot(["click"]);var bl=(e,t)=>{t()},wl=P('<button id="data_dir_button" class="p-2 hover:opacity-75"><div class="flex"><img src="svgs/database-solid.svg" alt="Browse app data" class="mr-2 h-7 w-7 rounded-lg bg-violet-500 p-1"/> Browse App Data</div></button> <div class="mx-auto p-2"><label for="check_announcements">Check game announcements:</label> <input id="check_announcements" type="checkbox" class="ml-2"/></div> <div class="mx-auto p-2"><label for="close_after_launch">Close Bolt after launching a game:</label> <input id="close_after_launch" type="checkbox" class="ml-2"/></div> <div class="mx-auto p-2"><label for="discard_expired_logins">Discard expired login sessions:</label> <input id="discard_expired_logins" type="checkbox" class="ml-2"/></div>',1);function yl(e,t){be(t,!1);const n=()=>Ee(i,"$config",r),[r,a]=Xe();function o(){var b=new XMLHttpRequest;b.open("GET","/browse-data"),b.onreadystatechange=()=>{b.readyState==4&&A.info(`Browse status: '${b.responseText.trim()}'`)},b.send()}const{config:i}=O,u="Allow checking for official announcements about game status. These will be displayed above the 'play' button. Disabling will reduce the number of web requests made when opening the launcher.",l="Close the launcher immediately after launching a game",c="Discard login sessions if they're no longer valid, prompting the player to sign-in again. If unchecked, the only way to discard a login will be by manually pressing the 'log out' button, even if your login no longer works.";Yt();var f=wl(),d=G(f);d.__click=[bl,o];var h=y(d,2);bt(h,"title",u);var p=y(L(h),2),_=y(h,2);bt(_,"title",l);var g=y(L(_),2),m=y(_,2);bt(m,"title",c);var w=y(L(m),2);ln(p,()=>n().check_announcements,b=>ae(i,I(n).check_announcements=b,I(n))),ln(g,()=>n().close_after_launch,b=>ae(i,I(n).close_after_launch=b,I(n))),ln(w,()=>n().discard_expired_sessions,b=>ae(i,I(n).discard_expired_sessions=b,I(n))),x(e,f),we(),a()}ot(["click"]);var kl=(e,t)=>t(),xl=(e,t)=>{t()},Sl=P('<button class="p-2 pb-5 hover:opacity-75"><div class="flex"><img src="svgs/wrench-solid.svg" alt="Configure RuneLite" class="mr-2 h-7 w-7 rounded-lg bg-pink-500 p-1"/> Configure RuneLite</div></button> <div class="mx-auto border-t-2 border-slate-300 p-2 pt-5 dark:border-slate-800"><label for="use_custom_jar">Use custom RuneLite JAR:</label> <input id="use_custom_jar" type="checkbox" class="ml-2"/></div> <div><textarea class="h-10 rounded border-2 border-slate-300 bg-slate-100 text-slate-950 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-50"></textarea> <br/> <button class="mt-1 rounded-lg border-2 border-blue-500 p-1 duration-200 enabled:hover:opacity-75">Select File</button></div> <div class="p-2"><label for="osrs_custom_launch_command">OSRS launch command:</label> <br/> <textarea id="osrs_custom_launch_command" class="resize-x rounded border-2 border-slate-300 bg-slate-100 text-slate-950 disabled:opacity-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-50" rows="1" cols="35"></textarea></div> <div class="p-2"><label for="runelite_custom_launch_command">RuneLite launch command:</label> <br/> <textarea id="runelite_custom_launch_command" class="resize-x rounded border-2 border-slate-300 bg-slate-100 text-slate-950 disabled:opacity-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-50" rows="1" cols="35"></textarea></div> <div class="p-2"><label for="hdos_custom_launch_command">HDOS launch command:</label> <br/> <textarea id="hdos_custom_launch_command" class="resize-x rounded border-2 border-slate-300 bg-slate-100 text-slate-950 disabled:opacity-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-50" rows="1" cols="35"></textarea></div>',1);function $l(e,t){be(t,!0);const n=()=>Ee(o,"$config",r),[r,a]=Xe(),{config:o}=O;let i=Me(()=>ce.findSession(n().selected.user_id)),u=Me(()=>ce.findAccount(v(i)?.accounts??[],n().userDetails[n().selected.user_id??""]?.account_id)),l=se(!1);async function c(){C(l,!0),ae(o,I(n).runelite_custom_jar=await ce.openFilePicker(),I(n)),console.log("done picking"),C(l,!1)}function f(){!v(i)?.session_id||!v(u)?.accountId||!v(u)?.displayName||ra(v(i).session_id,v(u).accountId,v(u).displayName,!0)}var d=Sl(),h=G(d);h.__click=[kl,f];var p=y(h,2),_=y(L(p),2),g=y(p,2);let m;var w=L(g),b=y(w,4);b.__click=[xl,c];var E=y(g,2),H=y(L(E),4);bt(H,"placeholder","%command%");var U=y(E,2),S=y(L(U),4);bt(S,"placeholder","%command%");var R=y(U,2),M=y(L(R),4);bt(M,"placeholder","%command%"),z(T=>{h.disabled=!v(i)?.session_id||!v(u)?.accountId,m=Oe(g,1,"mx-auto p-2",null,m,T),w.disabled=!n().runelite_use_custom_jar,b.disabled=v(l)||!n().runelite_use_custom_jar},[()=>({"opacity-25":!n().runelite_use_custom_jar})]),ln(_,()=>n().runelite_use_custom_jar,T=>ae(o,I(n).runelite_use_custom_jar=T,I(n))),jt(w,()=>n().runelite_custom_jar,T=>ae(o,I(n).runelite_custom_jar=T,I(n))),jt(H,()=>n().osrs_launch_command,T=>ae(o,I(n).osrs_launch_command=T,I(n))),jt(S,()=>n().runelite_launch_command,T=>ae(o,I(n).runelite_launch_command=T,I(n))),jt(M,()=>n().hdos_launch_command,T=>ae(o,I(n).hdos_launch_command=T,I(n))),x(e,d),we(),a()}ot(["click"]);var El=P('<div class="mx-auto p-2"><label for="enable_plugins">Enable Bolt plugin loader:</label> <input type="checkbox" name="enable_plugins" id="enable_plugins" class="ml-2"/></div>'),Pl=P('<!> <div class="mx-auto p-2"><label for="use_custom_uri">Use custom config URI:</label> <input id="use_custom_uri" type="checkbox" class="ml-2"/></div> <div class="p-2"><textarea class="rounded border-2 border-slate-300 bg-slate-100 text-slate-950 disabled:opacity-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-50" rows="4"></textarea></div> <div class="p-2"><label for="rs_custom_launch_command">Launch command:</label> <br/> <textarea id="rs_custom_launch_command" class="resize-x rounded border-2 border-slate-300 bg-slate-100 text-slate-950 disabled:opacity-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-50" rows="1" cols="35"></textarea></div>',1);function Ll(e,t){be(t,!1);const n=()=>Ee(o,"$config",r),[r,a]=Xe(),{config:o}=O;Yt();var i=Pl(),u=G(i);{var l=g=>{var m=El(),w=y(L(m),2);ln(w,()=>n().rs_plugin_loader,b=>ae(o,I(n).rs_plugin_loader=b,I(n))),x(g,m)};Z(u,g=>{$.hasBoltPlugins&&g(l)})}var c=y(u,2),f=y(L(c),2),d=y(c,2),h=L(d),p=y(d,2),_=y(L(p),4);bt(_,"placeholder","%command%"),z(()=>{h.disabled=!n().use_custom_rs_config_uri,bt(h,"placeholder",$.env.default_config_uri)}),ln(f,()=>n().use_custom_rs_config_uri,g=>ae(o,I(n).use_custom_rs_config_uri=g,I(n))),jt(h,()=>n().rs_config_uri,g=>ae(o,I(n).rs_config_uri=g,I(n))),jt(_,()=>n().rs_launch_command,g=>ae(o,I(n).rs_launch_command=g,I(n))),x(e,i),we(),a()}var Rl=(e,t,n)=>{C(t,n.general)},Cl=(e,t,n)=>{C(t,n.osrs)},Il=(e,t,n)=>{C(t,n.rs3)},Tl=P('<div class="grid h-full grid-cols-4"><div class="flex flex-col items-center gap-2 border-r-2 border-slate-300 pt-10 dark:border-slate-800"><button>General</button> <button>OSRS</button> <button>RS3</button></div> <div class="col-span-3 p-5 pt-10 text-center"><!></div></div>');function Ol(e,t){be(t,!1);var n=(f=>(f[f.general=0]="general",f[f.osrs=1]="osrs",f[f.rs3=2]="rs3",f))(n||{});let r=ze(),a=ze(0),o="border-2 border-blue-500 bg-blue-500 hover:opacity-75 font-bold text-black duration-200 rounded-lg p-1 w-3/4",i="border-2 border-blue-500 hover:opacity-75 duration-200 rounded-lg p-1 w-3/4";function u(){v(r).open()}const l=()=>ce.saveConfig();var c={open:u};return Yt(),kt(er(e,{class:"h-3/4 w-3/4 select-none",onClose:l,children:(f,d)=>{var h=Tl(),p=L(h),_=L(p);_.__click=[Rl,a,n];var g=y(_,2);g.__click=[Cl,a,n];var m=y(g,2);m.__click=[Il,a,n];var w=y(p,2),b=L(w);{var E=U=>{yl(U,{})},H=U=>{var S=ut(),R=G(S);{var M=J=>{$l(J,{})},T=J=>{var ue=ut(),X=G(ue);{var ve=B=>{Ll(B,{})};Z(X,B=>{v(a)==n.rs3&&B(ve)},!0)}x(J,ue)};Z(R,J=>{v(a)==n.osrs?J(M):J(T,!1)},!0)}x(U,S)};Z(b,U=>{v(a)==n.general?U(E):U(H,!1)})}z(()=>{Oe(_,1,Mn(v(a)===n.general?o:i)),Oe(g,1,Mn(v(a)===n.osrs?o:i)),Oe(m,1,Mn(v(a)===n.rs3?o:i))}),x(f,h)},$$slots:{default:!0},$$legacy:!0}),f=>C(r,f),()=>v(r)),ea(t,"open",u),we(c)}ot(["click"]);var Al=(e,t,n)=>{ae(n,I(t).selected.game=Re.rs3,I(t))},Ul=(e,t,n)=>{ae(n,I(t).selected.game=Re.osrs,I(t))},Nl=(e,t,n)=>ae(n,I(t).use_dark_theme=!t().use_dark_theme,I(t)),Hl=P('<div class="w-40"><!></div>'),Ml=P('<button class="h-11 w-48 rounded-lg border-2 border-slate-300 bg-inherit text-center font-bold text-black duration-200 hover:opacity-75 dark:border-slate-800 dark:text-slate-50"> </button>'),Dl=()=>{const{origin:e,redirect:t,clientid:n}=$.env;Ie.openLoginWindow(e,t,n)},jl=P('<button class="h-11 w-48 rounded-lg border-2 border-slate-300 bg-inherit p-2 text-center font-bold text-black duration-200 hover:opacity-75 dark:border-slate-800 dark:text-slate-50">Login</button>'),Fl=P('<div class="fixed left-[2%] top-20 w-[96%] rounded-lg bg-blue-400 px-2 text-black"> </div>'),Bl=P('<!> <div class="fixed top-0 flex h-16 w-screen border-b-2 border-slate-300 bg-slate-100 duration-200 dark:border-slate-800 dark:bg-slate-900"><div class="m-3 ml-9 font-bold"><button>RS3</button> <button>OSRS</button></div> <div class="m-2 ml-auto flex gap-2"><button class="h-10 w-10 rounded-full bg-blue-500 text-center duration-200 hover:rotate-45 hover:opacity-75"><img src="svgs/lightbulb-solid.svg" class="m-auto h-6 w-6" alt="Change Theme"/></button> <button class="h-10 w-10 rounded-full bg-blue-500 text-center duration-200 hover:rotate-45 hover:opacity-75"><img src="svgs/gear-solid.svg" class="m-auto h-6 w-6" alt="Settings"/></button> <!> <!></div></div>',1);function ql(e,t){be(t,!0);const n=()=>Ee(i,"$config",a),r=()=>Ee(u,"$sessions",a),[a,o]=Xe(),{config:i,sessions:u}=O;let l;var c=Bl(),f=G(c);kt(Ol(f,{}),T=>l=T,()=>l);var d=y(f,2),h=L(d),p=L(h);let _;p.__click=[Al,n,i];var g=y(p,2);let m;g.__click=[Ul,n,i];var w=y(h,2),b=L(w);b.__click=[Nl,n,i];var E=y(b,2);E.__click=()=>l.open();var H=y(E,2);{var U=T=>{const J=Me(()=>ce.findSession(n().selected.user_id??""));ml(T,{align:"center",content:X=>{var ve=Hl(),B=L(ve);_l(B,{}),x(X,ve)},children:(X,ve)=>{var B=Ml(),fe=L(B);z(()=>he(fe,v(J)?.user.displayName??"No user selected")),x(X,B)},$$slots:{content:!0,default:!0}})},S=T=>{var J=jl();J.__click=[Dl],x(T,J)};Z(H,T=>{r().length>0?T(U):T(S,!1)})}var R=y(H,2);{var M=T=>{var J=Fl(),ue=L(J);z(()=>he(ue,t.psa)),x(T,J)};Z(R,T=>{t.psa&&T(M)})}z((T,J)=>{_=Oe(p,1,"mx-1 w-20 rounded-lg border-2 border-blue-500 p-2 duration-200 hover:opacity-75",null,_,T),m=Oe(g,1,"mx-1 w-20 rounded-lg border-2 border-blue-500 bg-blue-500 p-2 text-black duration-200 hover:opacity-75",null,m,J)},[()=>({"text-black":n().selected.game===Re.rs3,"bg-blue-500":n().selected.game===Re.rs3}),()=>({"text-black":n().selected.game===Re.osrs,"bg-blue-500":n().selected.game===Re.osrs})]),x(e,c),we(),o()}ot(["click"]);var Wl=P('<!> <!> <div class="mt-16 grid h-full grid-flow-col grid-cols-3"><div></div> <!> <div></div></div> <!>',1);function Gl(e,t){be(t,!1);const n=()=>Ee(o,"$logs",r),[r,a]=Xe(),o=A.logs;let i=ze(null);Yt(),na(e,{children:(u,l)=>{var c=Wl(),f=G(c);ni(f,{});var d=y(f,2);ql(d,{get psa(){return v(i)}});var h=y(d,2),p=y(L(h),2);al(p,{get psa(){return v(i)},set psa(g){C(i,g)},$$legacy:!0});var _=y(h,2);ll(_,{get logs(){return n()}}),x(u,c)}}),we(),a()}const vs={target:document.getElementById("app")};window.opener||window.location.search.includes("&id_token")?is(Xo,vs):(zl(),zo(),Vl(),Jl().finally(()=>{O.initialized.set(!0)}),is(Gl,vs));function zl(){const e=new URLSearchParams(window.location.search);$.platform=e.get("platform"),$.isFlathub=e.get("flathub")==="1",$.hasLibArchive=e.get("has_libarchive")==="1",$.rs3debInstalledHash=e.get("rs3_deb_installed_hash"),$.rs3exeInstalledHash=e.get("rs3_exe_installed_hash"),$.rs3appInstalledHash=e.get("rs3_app_installed_hash"),$.osrsexeInstalledHash=e.get("osrs_exe_installed_hash"),$.osrsappInstalledHash=e.get("osrs_app_installed_hash"),$.runeLiteInstalledId=e.get("runelite_installed_id"),$.hdosInstalledVersion=e.get("hdos_installed_version");const t=e.get("plugins");if($.hasBoltPlugins=t!==null,t!==null)try{$.pluginConfig=JSON.parse(t)}catch{A.error("Unable to parse plugin list")}const n=e.get("credentials");if(n)try{const r=JSON.parse(n),a=r.every(o=>typeof o.session_id=="string"&&typeof o.tokens=="object"&&typeof o.accounts=="object"&&typeof o.user=="object");a?O.sessions.set(r):(O.sessions.set([]),ce.saveCredentials(),A.warn("Credentials saved on disk are out of date. Please sign in again.")),O.sessions.set(a?r:[])}catch{O.sessions.set([]),ce.saveCredentials(),A.error("Unable to parse saved credentials. Please sign in again.")}}function Vl(){const{origin:e,origin_2fa:t}=$.env,n=[window.location.origin,e,t];let r=null;window.addEventListener("message",async a=>{if(!n.includes(a.origin)){A.info(`discarding window message from origin ${a.origin}`);return}switch(a.data.type){case"authTokenUpdate":{r=a.data.tokens;break}case"authSessionUpdate":{if(r===null)return A.error("auth is null. Please try again.");const o=a.data.sessionId,i=await ce.login(r,o);i.ok?A.info(`Added new user '${i.value.user.displayName}'`):A.error(`Unable to add new user. Please try again. ${i.error}`),ce.saveCredentials(),Ie.pendingLoginWindow=null,r=null;break}case"authFailed":{A.error(`Unable to authenticate: ${a.data.reason}`),Ie.pendingLoginWindow=null,r=null;break}case"externalUrl":{const o=new XMLHttpRequest;o.onreadystatechange=()=>{o.readyState==4&&A.info(`External URL status: '${o.responseText.trim()}'`)},o.open("POST","/open-external-url",!0),o.send(a.data.url);break}case"gameClientList":Ce(O.config).close_after_launch&&a.data.clients.length>Ce(Lr).length?fetch("/close"):Lr.set(a.data.clients);break;default:{const o=a.data?.type??"no type provided";A.info(`Unknown message type: ${o}`);break}}})}async function Jl(){const e=Ce(O.config).discard_expired_sessions,t=Ce(O.sessions),n=[];t.length>0&&A.info("Logging in...");const r=t.map(i=>({promise:Ie.refreshOAuthToken(i.tokens),session:i})),a=[];for(const i of r){const u=i.session,l=await i.promise;if(!l.ok){l.error===0?A.error(`Unable to verify saved login, status: ${l.error}. Do you have an internet connection? Please relaunch Bolt to try again.`):l.error>=400&&l.error<500&&e?(A.error(`Discarding expired login, status: ${l.error}. Please sign in again.`),n.push(u.tokens.sub)):A.error(`Unable to verify saved login due to HTTP error ${l.error}`);continue}const c=l.value;u.tokens=c,a.push({promise:ce.login(c,u.session_id),session:u})}for(const i of a){const u=i.session,l=await i.promise;l.ok?A.info(`Signed into saved user '${l.value.user.displayName}'`):(A.error(`Unable to sign into saved user '${u.user.displayName}' due to an error: ${l.error}`),e&&n.push(u.tokens.sub))}const o=n.map(ce.logout);for(const i of o)await i;O.sessions.set(t),await ce.saveCredentials()}
